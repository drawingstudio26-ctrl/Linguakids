<!DOCTYPE html>
<html lang="hi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#58CC02">
  <title>LinguaKids - Hindi Level 2</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link href="https://fonts.googleapis.com/css2?family=Baloo+2:wght@600;700&family=Quicksand:wght@400;500;600&display=swap" rel="stylesheet">
  <style>
    body, html { 
      margin: 0; 
      padding: 0; 
      font-family: 'Quicksand', sans-serif; 
      background:#f6f8ff; 
      overflow-x: hidden;
    }

    h2 { 
      text-align:center; 
      color:#58cc02; 
      font-family:'Baloo 2', cursive; 
    }

    .item-grid {
      display: grid;
      grid-template-columns: repeat(5, 1fr);
      gap: 20px;
      margin: 20px auto;
      padding: 0 15px;
      max-width: 1200px;
      box-sizing: border-box;
    }

    .item-card {
      background: white;
      padding: 15px;
      border-radius: 12px;
      text-align: center;
      box-shadow: 0 4px 8px rgba(0,0,0,0.1);
      width: 100%;
      box-sizing: border-box;
      cursor: pointer; /* Ensure card is clickable */
      transition: transform 0.2s;
    }

    .item-card:hover {
        transform: translateY(-2px);
    }

    .item-card div { margin: 5px 0; }

    .item-card img {
      width: 50px;
      height: 50px;
      object-fit: contain;
    }

    .speak-btn {
      background: linear-gradient(to right,#58cc02,#1cb0f6);
      border: none; 
      color: white; 
      padding: 6px 12px;
      border-radius: 50px; 
      cursor: pointer;
      font-size: 0.9rem; 
      font-family: 'Baloo 2', cursive;
    }
    .speak-btn:hover { opacity: 0.9; }
    .speak-btn:active { transform: scale(0.95); }

    .btn {
      background: linear-gradient(to right,#58cc02,#1cb0f6);
      border: none; 
      color: white; 
      padding: 8px 20px; 
      border-radius: 50px;
      font-family: 'Baloo 2', cursive; 
      cursor: pointer; 
      margin: 10px 5px;
    }
    .btn:active { transform: scale(0.96); }

    .toast {
      position: fixed;
      bottom: 20px;
      right: 20px;
      background: #58cc02;
      color: white;
      padding: 15px 20px;
      border-radius: 8px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
      z-index: 1000;
      display: flex;
      align-items: center;
      gap: 10px;
      transform: translateY(100px);
      opacity: 0;
      transition: transform 0.3s, opacity 0.3s;
    }
    
    .toast.show {
      transform: translateY(0);
      opacity: 1;
    }

    @media (max-width: 900px) {
      .item-grid {
        grid-template-columns: repeat(3, 1fr);
        max-width: 100%;
        padding: 0 10px;
      }
    }

    @media (max-width: 600px) {
      .item-grid {
        grid-template-columns: repeat(2, 1fr);
        max-width: 100%;
        padding: 0 8px;
      }
    }
  </style>
</head>
<body>
  <button onclick="goBack()" class="btn">Back</button>
  <h2 id="categoryTitle"></h2>
  <div id="content" class="item-grid"></div>

  <div id="achievementToast" class="toast" style="display: none;">
    <i class="fas fa-check-circle"></i>
    <div>
      <div id="toastTitle">Great job!</div>
      <div id="toastDesc">Progress saved.</div>
    </div>
  </div>

<script>
// === DATA CONSTANTS ===
const VOWELS_LENGTH = 12;
const CONSONANTS_LENGTH = 37;
const NUMBERS_1_TO_100_LENGTH = 100;
const LEVEL2_CATEGORY_LENGTH = 10;
const LEVEL3_CATEGORY_LENGTH = 10;
const GAMES_LENGTHS = { 'fill-blanks': 5, 'match-words': 2, 'count-apples': 5 };

// === CORE PROGRESS AND STREAK LOGIC (SELF-CONTAINED) ===
function initHindiProgress() {
  let progress = JSON.parse(localStorage.getItem('linguaKidsHindiProgress'));
  if (!progress) {
    const defaultProgress = {
      level1: { alphabets: { completed: 0, total: VOWELS_LENGTH + CONSONANTS_LENGTH }, numbers: { completed: 0, total: NUMBERS_1_TO_100_LENGTH }},
      level2: { fruits: { completed: 0, total: LEVEL2_CATEGORY_LENGTH }, vegetables: { completed: 0, total: LEVEL2_CATEGORY_LENGTH }, animals: { completed: 0, total: LEVEL2_CATEGORY_LENGTH }, birds: { completed: 0, total: LEVEL2_CATEGORY_LENGTH }, vehicles: { completed: 0, total: LEVEL2_CATEGORY_LENGTH }, colors: { completed: 0, total: LEVEL2_CATEGORY_LENGTH }},
      level3: { greetings: { completed: 0, total: LEVEL3_CATEGORY_LENGTH }, activities: { completed: 0, total: LEVEL3_CATEGORY_LENGTH }, questions: { completed: 0, total: LEVEL3_CATEGORY_LENGTH }},
      games: { 'fill-blanks': { completed: 0, total: GAMES_LENGTHS['fill-blanks'] }, 'match-words': { completed: 0, total: GAMES_LENGTHS['match-words'] }, 'count-apples': { completed: 0, total: GAMES_LENGTHS['count-apples'] }},
      achievements: { firstSteps: false, alphabetMaster: false, numberWhiz: false, wordExpert: false, sentenceBuilder: false, gameChampion: false, weekStreak: false, monthStreak: false },
      streak: { count: 0, lastDate: null }, sessionDate: null
    };
    localStorage.setItem('linguaKidsHindiProgress', JSON.stringify(defaultProgress));
  }
}

function updateHindiStreak() {
  const progress = JSON.parse(localStorage.getItem('linguaKidsHindiProgress'));
  if (!progress) return;
  const today = new Date().toDateString();
  if (progress.sessionDate !== today) {
    const lastDate = progress.streak.lastDate ? new Date(progress.streak.lastDate) : null;
    const todayDate = new Date();
    if (lastDate) {
      const diffTime = todayDate.getTime() - lastDate.getTime();
      const diffDays = Math.round(diffTime / (1000 * 60 * 60 * 24));
      if (diffDays === 1) { progress.streak.count++; } 
      else if (diffDays > 1) { progress.streak.count = 1; }
    } else { progress.streak.count = 1; }
    progress.streak.lastDate = today;
    progress.sessionDate = today;
    localStorage.setItem('linguaKidsHindiProgress', JSON.stringify(progress));
  }
}

function updateHindiProgress(level, category, increment = 1, itemIdentifier = null) {
  const progress = JSON.parse(localStorage.getItem('linguaKidsHindiProgress'));
  if (!progress || !progress[level] || !progress[level][category]) return false;
  const today = new Date().toDateString();
  const sessionKey = itemIdentifier ? `${level}_${category}_${itemIdentifier}_${today}` : null;
  if (sessionKey && sessionStorage.getItem(sessionKey)) { return false; }
  if (progress[level][category].completed < progress[level][category].total) {
    progress[level][category].completed = Math.min(progress[level][category].completed + increment, progress[level][category].total);
  } else { return false; }
  localStorage.setItem('linguaKidsHindiProgress', JSON.stringify(progress));
  if (sessionKey) { sessionStorage.setItem(sessionKey, 'true'); }
  updateHindiStreak();
  showToast("à¤¬à¤¹à¥à¤¤ à¤¬à¤¢à¤¼à¤¿à¤¯à¤¾!", "à¤ªà¥à¤°à¤—à¤¤à¤¿ à¤¦à¤°à¥à¤œ à¤¹à¥à¤ˆ (Progress saved!)");
  return true;
}

function showToast(title, description) {
  const toast = document.getElementById("achievementToast");
  if (!toast) return;
  toast.style.display = 'flex';
  toast.querySelector("#toastTitle").textContent = title;
  toast.querySelector("#toastDesc").textContent = description;
  toast.classList.add("show");
  setTimeout(() => { 
      toast.classList.remove("show");
      setTimeout(() => { toast.style.display = 'none'; }, 300);
  }, 3000);
}


// === PAGE-SPECIFIC DATA AND FUNCTIONS ===
const DATA = {
  fruits: [
  {name: "à¤¸à¥‡à¤¬", english: "Apple", icon: "ðŸŽ"},
  {name: "à¤•à¥‡à¤²à¤¾", english: "Banana", icon: "ðŸŒ"},
  {name: "à¤¸à¤‚à¤¤à¤°à¤¾", english: "Orange", icon: "ðŸŠ"},
  {name: "à¤†à¤®", english: "Mango", icon: "ðŸ¥­"},
  {name: "à¤…à¤‚à¤—à¥‚à¤°", english: "Grapes", icon: "ðŸ‡"},
  {name: "à¤…à¤¨à¤¾à¤¨à¤¾à¤¸", english: "Pineapple", icon: "ðŸ"},
  {name: "à¤¸à¥à¤Ÿà¥à¤°à¥‰à¤¬à¥‡à¤°à¥€", english: "Strawberry", icon: "ðŸ“"},
  {name: "à¤¤à¤°à¤¬à¥‚à¤œ", english: "Watermelon", icon: "ðŸ‰"},
  {name: "à¤šà¥‡à¤°à¥€", english: "Cherry", icon: "ðŸ’"},
  {name: "à¤†à¤¡à¤¼à¥‚", english: "Peach", icon: "ðŸ‘"},

  // NEW FRUITS
  {name: "à¤•à¥€à¤µà¥€", english: "Kiwi", icon: "ðŸ¥"},
  {name: "à¤¨à¥€à¤‚à¤¬à¥‚", english: "Lemon", icon: "ðŸ‹"},
  {name: "à¤ªà¤ªà¥€à¤¤à¤¾", english: "Papaya", icon: "ðŸˆ"},
  {name: "à¤¨à¤¾à¤¶à¤ªà¤¾à¤¤à¥€", english: "Pear", icon: "ðŸ"},
  {name: "à¤–à¤°à¤¬à¥‚à¤œ", english: "Melon", icon: "ðŸˆ"},
  {name: "à¤¨à¤¾à¤°à¤¿à¤¯à¤²", english: "Coconut", icon: "ðŸ¥¥"},
],

  vegetables: [
  {name: "à¤—à¤¾à¤œà¤°", english: "Carrot", icon: "ðŸ¥•"},
  {name: "à¤†à¤²à¥‚", english: "Potato", icon: "ðŸ¥”"},
  {name: "à¤Ÿà¤®à¤¾à¤Ÿà¤°", english: "Tomato", icon: "ðŸ…"},
  {name: "à¤ªà¤¤à¥à¤¤à¤¾à¤—à¥‹à¤­à¥€", english: "Cabbage", icon: "ðŸ¥¬"},
  {name: "à¤®à¤•à¥à¤•à¤¾", english: "Corn", icon: "ðŸŒ½"},
  {name: "à¤ªà¥à¤¯à¤¾à¤œ", english: "Onion", icon: "ðŸ§…"},
  {name: "à¤²à¤¹à¤¸à¥à¤¨", english: "Garlic", icon: "ðŸ§„"},
  {name: "à¤¬à¥à¤°à¥‹à¤•à¤²à¥€", english: "Broccoli", icon: "ðŸ¥¦"},
  {name: "à¤–à¥€à¤°à¤¾", english: "Cucumber", icon: "ðŸ¥’"},
  {name: "à¤¶à¤¿à¤®à¤²à¤¾ à¤®à¤¿à¤°à¥à¤š", english: "Pepper", icon: "ðŸŒ¶ï¸"},

  // NEW VEGETABLES
  {name: "à¤•à¤¦à¥à¤¦à¥‚", english: "Pumpkin", icon: "ðŸŽƒ"},
  {name: "à¤ªà¤¾à¤²à¤•", english: "Spinach", icon: "ðŸŒ¿"},
  {name: "à¤¬à¥ˆà¤‚à¤—à¤¨", english: "Eggplant", icon: "ðŸ†"},
  {name: "à¤šà¤¿à¤²à¥€", english: "Chili", icon: "ðŸŒ¶ï¸"},
  {name: "à¤¸à¤²à¤¾à¤¦ à¤ªà¤¤à¥à¤¤à¤¾", english: "Lettuce", icon: "ðŸ¥¬"},
  {name: "à¤®à¤¶à¤°à¥‚à¤®", english: "Mushroom", icon: "ðŸ„"},
  {name: "à¤®à¥‚à¤²à¥€", english: "Radish", icon: "ðŸ¥—"}
],

  animals: [
  {name: "à¤¶à¥‡à¤°", english: "Lion", icon: "ðŸ¦"},
  {name: "à¤¬à¤¾à¤˜", english: "Tiger", icon: "ðŸ¯"},
  {name: "à¤¹à¤¾à¤¥à¥€", english: "Elephant", icon: "ðŸ˜"},
  {name: "à¤•à¥à¤¤à¥à¤¤à¤¾", english: "Dog", icon: "ðŸ¶"},
  {name: "à¤¬à¤¿à¤²à¥à¤²à¥€", english: "Cat", icon: "ðŸ±"},
  {name: "à¤˜à¥‹à¤¡à¤¼à¤¾", english: "Horse", icon: "ðŸ´"},
  {name: "à¤¬à¤‚à¤¦à¤°", english: "Monkey", icon: "ðŸµ"},
  {name: "à¤—à¤¾à¤¯", english: "Cow", icon: "ðŸ„"},
  {name: "à¤–à¤°à¤—à¥‹à¤¶", english: "Rabbit", icon: "ðŸ‡"},
  {name: "à¤­à¥‡à¤¡à¤¼", english: "Sheep", icon: "ðŸ‘"},

  // NEW ANIMALS
  {name: "à¤²à¥‹à¤®à¤¡à¤¼à¥€", english: "Fox", icon: "ðŸ¦Š"},
  {name: "à¤ªà¤¾à¤‚à¤¡à¤¾", english: "Panda", icon: "ðŸ¼"},
  {name: "à¤­à¤¾à¤²à¥‚", english: "Bear", icon: "ðŸ»"},
  {name: "à¤Šà¤à¤Ÿ", english: "Camel", icon: "ðŸª"},
  {name: "à¤¹à¤¿à¤°à¤£", english: "Deer", icon: "ðŸ¦Œ"},
  {name: "à¤•à¤›à¥à¤†", english: "Turtle", icon: "ðŸ¢"},
  {name: "à¤¡à¥‰à¤²à¥à¤«à¤¼à¤¿à¤¨", english: "Dolphin", icon: "ðŸ¬"},
  {name: "à¤®à¤›à¤²à¥€", english: "Fish", icon: "ðŸŸ"},
  {name: "à¤¸à¤¾à¤à¤ª", english: "Snake", icon: "ðŸ"},
  {name: "à¤¸à¥à¤…à¤°", english: "Pig", icon: "ðŸ·"}
],

  birds: [
  {name: "à¤¤à¥‹à¤¤à¤¾", english: "Parrot", icon: "ðŸ¦œ"},
  {name: "à¤•à¥Œà¤†", english: "Crow", icon: "ðŸ¦"},
  {name: "à¤®à¥‹à¤°", english: "Peacock", icon: "ðŸ¦š"},
  {name: "à¤—à¥Œà¤°à¥ˆà¤¯à¤¾", english: "Sparrow", icon: "ðŸ¤"},
  {name: "à¤‰à¤²à¥à¤²à¥‚", english: "Owl", icon: "ðŸ¦‰"},
  {name: "à¤¬à¤¤à¥à¤¤à¤–", english: "Duck", icon: "ðŸ¦†"},
  {name: "à¤¹à¤‚à¤¸", english: "Swan", icon: "ðŸ¦¢"},
  {name: "à¤•à¤¬à¥‚à¤¤à¤°", english: "Pigeon", icon: "ðŸ•Šï¸"},
  {name: "à¤¬à¤¾à¤œ", english: "Eagle", icon: "ðŸ¦…"},
  {name: "à¤«à¥à¤²à¥‡à¤®à¤¿à¤‚à¤—à¥‹", english: "Flamingo", icon: "ðŸ¦©"},

  // NEW BIRDS
  {name: "à¤ªà¥‡à¤‚à¤—à¥à¤‡à¤¨", english: "Penguin", icon: "ðŸ§"},
  {name: "à¤®à¥à¤°à¥à¤—à¤¾", english: "Rooster", icon: "ðŸ“"},
  {name: "à¤®à¥à¤°à¥à¤—à¥€", english: "Hen", icon: "ðŸ”"},
  {name: "à¤Ÿà¤°à¥à¤•à¥€", english: "Turkey", icon: "ðŸ¦ƒ"},
  {name: "à¤¹à¤®à¤¿à¤‚à¤—à¤¬à¤°à¥à¤¡", english: "Hummingbird", icon: "ðŸ¦"},
  {name: "à¤¸à¥€à¤—à¤²", english: "Seagull", icon: "ðŸ•Šï¸"},
  {name: "à¤µà¥à¤¡à¤ªà¥‡à¤•à¤°", english: "Woodpecker", icon: "ðŸ¦"}
],

  vehicles: [
  {name: "à¤•à¤¾à¤°", english: "Car", icon: "ðŸš—"},
  {name: "à¤¬à¤¸", english: "Bus", icon: "ðŸšŒ"},
  {name: "à¤Ÿà¥à¤°à¤•", english: "Truck", icon: "ðŸšš"},
  {name: "à¤Ÿà¥à¤°à¥‡à¤¨", english: "Train", icon: "ðŸš†"},
  {name: "à¤µà¤¿à¤®à¤¾à¤¨", english: "Airplane", icon: "âœˆï¸"},
  {name: "à¤¸à¤¾à¤‡à¤•à¤¿à¤²", english: "Bicycle", icon: "ðŸš²"},
  {name: "à¤®à¥‹à¤Ÿà¤°à¤¸à¤¾à¤‡à¤•à¤¿à¤²", english: "Motorcycle", icon: "ðŸï¸"},
  {name: "à¤¨à¤¾à¤µ", english: "Boat", icon: "â›µ"},
  {name: "à¤¹à¥‡à¤²à¥€à¤•à¥‰à¤ªà¥à¤Ÿà¤°", english: "Helicopter", icon: "ðŸš"},
  {name: "à¤Ÿà¥à¤°à¥ˆà¤•à¥à¤Ÿà¤°", english: "Tractor", icon: "ðŸšœ"},

  // NEW VEHICLES
  {name: "à¤‘à¤Ÿà¥‹", english: "Auto Rickshaw", icon: "ðŸ›º"},
  {name: "à¤Ÿà¥ˆà¤•à¥à¤¸à¥€", english: "Taxi", icon: "ðŸš•"},
  {name: "à¤ªà¥à¤²à¤¿à¤¸ à¤•à¤¾à¤°", english: "Police Car", icon: "ðŸš“"},
  {name: "à¤à¤‚à¤¬à¥à¤²à¥‡à¤‚à¤¸", english: "Ambulance", icon: "ðŸš‘"},
  {name: "à¤«à¤¾à¤¯à¤° à¤Ÿà¥à¤°à¤•", english: "Fire Truck", icon: "ðŸš’"},
  {name: "à¤®à¥‡à¤Ÿà¥à¤°à¥‹", english: "Metro", icon: "ðŸš‡"},
  {name: "à¤°à¥‰à¤•à¥‡à¤Ÿ", english: "Rocket", icon: "ðŸš€"},
  {name: "à¤¸à¥à¤•à¥‚à¤Ÿà¤°", english: "Scooter", icon: "ðŸ›µ"},
  {name: "à¤¶à¤¿à¤ª", english: "Ship", icon: "ðŸš¢"},
  {name: "à¤¸à¥à¤²à¥‡à¤œ", english: "Sledge", icon: "ðŸ›·"}
],

  colors: [
  {name: "à¤²à¤¾à¤²", english: "Red", icon: "ðŸ”´"},
  {name: "à¤¨à¥€à¤²à¤¾", english: "Blue", icon: "ðŸ”µ"},
  {name: "à¤¹à¤°à¤¾", english: "Green", icon: "ðŸŸ¢"},
  {name: "à¤ªà¥€à¤²à¤¾", english: "Yellow", icon: "ðŸŸ¡"},
  {name: "à¤¨à¤¾à¤°à¤‚à¤—à¥€", english: "Orange", icon: "ðŸŸ "},
  {name: "à¤¬à¥ˆà¤‚à¤—à¤¨à¥€", english: "Purple", icon: "ðŸŸ£"},
  {name: "à¤—à¥à¤²à¤¾à¤¬à¥€", english: "Pink", icon: "ðŸŒ¸"},
  {name: "à¤­à¥‚à¤°à¤¾", english: "Brown", icon: "ðŸŸ¤"},
  {name: "à¤•à¤¾à¤²à¤¾", english: "Black", icon: "âš«"},
  {name: "à¤¸à¤«à¥‡à¤¦", english: "White", icon: "âšª"},
]

};

const CATEGORY_NAMES = {
  fruits: "à¤«à¤² (Fruits)",
  vegetables: "à¤¸à¤¬à¥à¤œà¤¿à¤¯à¤¾à¤ (Vegetables)",
  animals: "à¤œà¤¾à¤¨à¤µà¤° (Animals)",
  birds: "à¤ªà¤•à¥à¤·à¥€ (Birds)",
  vehicles: "à¤µà¤¾à¤¹à¤¨ (Vehicles)",
  colors: "à¤°à¤‚à¤— (Colors)"
};

const urlParams = new URLSearchParams(window.location.search);
const category = urlParams.get('category');

function trackWordProgress(category, wordName) {
  // This function now reliably calls the self-contained updateHindiProgress function.
  updateHindiProgress('level2', category, 1, wordName);
}

function initializePage() {
    if (category && DATA[category]) {
        document.getElementById('categoryTitle').textContent = CATEGORY_NAMES[category];
        
        document.getElementById('content').innerHTML = DATA[category].map(item => `
        <div class="item-card" onclick="trackWordProgress('${category}', '${item.name}')">
            <div style="font-size: 2rem;">${item.icon}</div>
            <div style="font-size: 1.5rem; font-weight: bold;">${item.name}</div>
            <div style="color: #666;">${item.english}</div>
            <button class="speak-btn" onclick="event.stopPropagation(); speakText('${item.name}'); trackWordProgress('${category}', '${item.name}')">
            <i class="fas fa-volume-up"></i>
            </button>
        </div>
        `).join('');
    } else {
        document.getElementById('content').innerHTML = '<p>Category not found. Please return to the Hindi main menu.</p>';
    }
}

function speakText(text) {
  if ('speechSynthesis' in window) {
    const utterance = new SpeechSynthesisUtterance(text);
    utterance.lang = 'hi-IN';
    utterance.rate = 0.8;
    speechSynthesis.speak(utterance);
  } else {
    alert('Speech synthesis not supported in this browser.');
  }
}

function goBack() {
  window.location.href = 'hindi.html';
}

document.addEventListener('DOMContentLoaded', function() {
  initHindiProgress();
  initializePage();
});
</script>

<script src="script.js"></script>

</body>
</html>