<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#58CC02">
  <title>LinguaKids - Level 3</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link href="https://fonts.googleapis.com/css2?family=Baloo+2:wght@600;700&family=Quicksand:wght@400;500;600&display=swap" rel="stylesheet">
  <style>
    body, html { 
      margin: 0; 
      padding: 0; 
      font-family: 'Quicksand', sans-serif; 
      background:#f6f8ff; 
      overflow-x: hidden;
    }

    h2 { 
      text-align:center; 
      color:#58cc02; 
      font-family:'Baloo 2', cursive; 
    }

    /* Grid layout */
    .item-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr); /* 3 per row desktop */
      gap: 20px;
      margin: 20px auto;
      padding: 0 15px;
      max-width: 1000px;
      box-sizing: border-box;
    }

    .item-card {
      background: white;
      padding: 15px;
      border-radius: 12px;
      text-align: center;
      box-shadow: 0 4px 8px rgba(0,0,0,0.1);
      width: 100%;
      box-sizing: border-box;
    }

    .question {
      font-weight: bold;
      color: #1cb0f6;
      margin-bottom: 8px;
    }
    .answer {
      margin-bottom: 10px;
      color: #333;
    }

    .speak-btn {
      background: linear-gradient(to right,#58cc02,#1cb0f6);
      border: none; 
      color: white; 
      padding: 6px 12px;
      border-radius: 50px; 
      cursor: pointer;
      font-size: 0.9rem; 
      font-family: 'Baloo 2', cursive;
      margin: 4px;
    }
    .speak-btn:hover { opacity: 0.9; }

    /* Back button */
    .btn {
      background: linear-gradient(to right,#58cc02,#1cb0f6);
      border: none; 
      color: white; 
      padding: 8px 20px; 
      border-radius: 50px;
      font-family: 'Baloo 2', cursive; 
      cursor: pointer; 
      margin: 10px 5px;
    }
    .btn:active { transform: scale(0.96); }

    /* Tablet */
    @media (max-width: 900px) {
      .item-grid { grid-template-columns: repeat(2, 1fr); }
    }

    /* Mobile */
    @media (max-width: 600px) {
      .item-grid { grid-template-columns: repeat(1, 1fr); }
    }
  </style>
</head>
<body>
  <button onclick="goBack()" class="btn">Back</button>
  <h2 id="categoryTitle"></h2>
  <div id="content" class="item-grid"></div>

<script>
const DATA = {
  greetings: [
    { q: "Hallo!", a: "Hallo! ðŸ‘‹", q_en: "Hello!", a_en: "Hello! ðŸ‘‹" },
    { q: "Guten Morgen", a: "Guten Morgen! â˜€ï¸", q_en: "Good morning", a_en: "Good morning! â˜€ï¸" },
    { q: "Guten Tag", a: "Guten Tag! ðŸŒž", q_en: "Good afternoon", a_en: "Good afternoon! ðŸŒž" },
    { q: "Guten Abend", a: "Guten Abend! ðŸŒ™", q_en: "Good evening", a_en: "Good evening! ðŸŒ™" },
    { q: "Gute Nacht", a: "Gute Nacht! ðŸŒœ", q_en: "Good night", a_en: "Good night! ðŸŒœ" },
    { q: "Wie geht es dir?", a: "Mir geht es gut, danke! ðŸ˜Š", q_en: "How are you?", a_en: "I'm fine, thank you! ðŸ˜Š" },
    { q: "Wie heiÃŸt du?", a: "Ich heiÃŸe [Dein Name]", q_en: "What's your name?", a_en: "My name is [Your Name]" },
    { q: "SchÃ¶n, dich kennenzulernen", a: "SchÃ¶n, dich kennenzulernen! ðŸ¤", q_en: "Nice to meet you", a_en: "Nice to meet you too! ðŸ¤" },
    { q: "Bis spÃ¤ter", a: "TschÃ¼ss! ðŸ‘‹", q_en: "See you later", a_en: "See you! ðŸ‘‹" },
    { q: "Danke", a: "Bitte! ðŸ˜Š", q_en: "Thank you", a_en: "You're welcome! ðŸ˜Š" },
    { q: "Willkommen!", a: "Willkommen! ðŸ¤—", q_en: "Welcome!", a_en: "Welcome! ðŸ¤—" },
{ q: "Alles gut?", a: "Ja, alles gut! ðŸ˜Š", q_en: "All good?", a_en: "Yes, all good! ðŸ˜Š" },
{ q: "Wie war dein Tag?", a: "Mein Tag war schÃ¶n! ðŸŒž", q_en: "How was your day?", a_en: "My day was nice! ðŸŒž" },
{ q: "Was machst du?", a: "Ich spiele! ðŸŽ®", q_en: "What are you doing?", a_en: "I'm playing! ðŸŽ®" },
{ q: "Bis morgen!", a: "Bis morgen! ðŸŒ™", q_en: "See you tomorrow!", a_en: "See you tomorrow! ðŸŒ™" },
{ q: "Freut mich!", a: "Mich auch! ðŸ˜Š", q_en: "Pleased to meet you!", a_en: "Me too! ðŸ˜Š" },
{ q: "TschÃ¼ss!", a: "TschÃ¼ss! ðŸ‘‹", q_en: "Bye!", a_en: "Bye! ðŸ‘‹" },
{ q: "Danke schÃ¶n", a: "Sehr gern! ðŸ˜Š", q_en: "Thank you very much", a_en: "You're very welcome! ðŸ˜Š" },
{ q: "Viel GlÃ¼ck!", a: "Danke! ðŸ€", q_en: "Good luck!", a_en: "Thanks! ðŸ€" },
{ q: "Kommst du mit?", a: "Ja, ich komme! ðŸš¶â€â™‚ï¸", q_en: "Are you coming?", a_en: "Yes, I'm coming! ðŸš¶â€â™‚ï¸" }

  ],
  activities: [
    { q: "Ich esse Essen ðŸŽ", q_en: "I eat food ðŸŽ" },
    { q: "Ich gehe zur Schule ðŸ«", q_en: "I go to school ðŸ«" },
    { q: "Ich spiele mit Freunden ðŸ‘«", q_en: "I play with friends ðŸ‘«" },
    { q: "Ich lese BÃ¼cher ðŸ“š", q_en: "I read books ðŸ“š" },
    { q: "Ich sehe fern ðŸ“º", q_en: "I watch TV ðŸ“º" },
    { q: "Ich helfe meiner Mutter ðŸ‘©", q_en: "I help my mom ðŸ‘©" },
    { q: "Ich bade ðŸ›", q_en: "I take a bath ðŸ›" },
    { q: "Ich putze mir die ZÃ¤hne ðŸ¦·", q_en: "I brush my teeth ðŸ¦·" },
    { q: "Ich schlafe nachts ðŸ˜´", q_en: "I sleep at night ðŸ˜´" },
    { q: "Ich trinke Wasser ðŸ’§", q_en: "I drink water ðŸ’§" },
    { q: "Ich male Bilder ðŸŽ¨", q_en: "I paint pictures ðŸŽ¨" },
{ q: "Ich spiele FuÃŸball âš½", q_en: "I play football âš½" },
{ q: "Ich hÃ¶re Musik ðŸŽ§", q_en: "I listen to music ðŸŽ§" },
{ q: "Ich lerne Deutsch ðŸ‡©ðŸ‡ª", q_en: "I learn German ðŸ‡©ðŸ‡ª" },
{ q: "Ich koche Essen ðŸ½ï¸", q_en: "I cook food ðŸ½ï¸" },
{ q: "Ich singe ein Lied ðŸŽ¤", q_en: "I sing a song ðŸŽ¤" },
{ q: "Ich renne schnell ðŸƒâ€â™‚ï¸", q_en: "I run fast ðŸƒâ€â™‚ï¸" },
{ q: "Ich spiele Videospiele ðŸŽ®", q_en: "I play video games ðŸŽ®" },
{ q: "Ich zeichne âœï¸", q_en: "I draw âœï¸" },
{ q: "Ich spiele drauÃŸen ðŸŒ³", q_en: "I play outside ðŸŒ³" }

  ],
  questions: [
    { q: "Wie heiÃŸt du?", a: "Ich heiÃŸe Johann.", q_en: "What is your name?", a_en: "My name is John." },
    { q: "Wie alt bist du?", a: "Ich bin 6 Jahre alt.", q_en: "How old are you?", a_en: "I am 6 years old." },
    { q: "Wo wohnst du?", a: "Ich wohne in Deutschland.", q_en: "Where do you live?", a_en: "I live in Germany." },
    { q: "Magst du Obst?", a: "Ja, ich mag Ã„pfel.", q_en: "Do you like fruits?", a_en: "Yes, I like apples." },
    { q: "Was ist das?ðŸŽ", a: "Das ist ein Apfel.", q_en: "What is this?ðŸŽ", a_en: "This is an apple." },
    { q: "Was machst du gerne?", a: "Ich spiele gerne. ðŸŽ®", q_en: "What do you like to do?", a_en: "I like to play. ðŸŽ®" },
{ q: "Welche Farbe magst du?", a: "Ich mag Blau. ðŸ”µ", q_en: "Which color do you like?", a_en: "I like blue. ðŸ”µ" },
{ q: "Liebst du Tiere?", a: "Ja, ich liebe Hunde! ðŸ¶", q_en: "Do you love animals?", a_en: "Yes, I love dogs! ðŸ¶" },
{ q: "Bist du mÃ¼de?", a: "Ja, ein bisschen. ðŸ˜´", q_en: "Are you tired?", a_en: "Yes, a little. ðŸ˜´" },
{ q: "Was isst du gerne?", a: "Ich esse gerne Pizza. ðŸ•", q_en: "What do you like to eat?", a_en: "I like eating pizza. ðŸ•" },
{ q: "Kannst du schwimmen?", a: "Ja, ich kann schwimmen! ðŸŠâ€â™‚ï¸", q_en: "Can you swim?", a_en: "Yes, I can swim! ðŸŠâ€â™‚ï¸" },
{ q: "Hast du Geschwister?", a: "Ja, ich habe eine Schwester.", q_en: "Do you have siblings?", a_en: "Yes, I have a sister." },
{ q: "Was ist dein Lieblingsobst?", a: "Mein Lieblingsobst ist Mango ðŸ¥­.", q_en: "What is your favorite fruit?", a_en: "My favorite fruit is mango ðŸ¥­." },
{ q: "Hast du Hunger?", a: "Ja, ich habe Hunger! ðŸ½ï¸", q_en: "Are you hungry?", a_en: "Yes, I'm hungry! ðŸ½ï¸" },
{ q: "Wo ist deine Schule?", a: "Meine Schule ist in der Stadt.", q_en: "Where is your school?", a_en: "My school is in the city." }

  ]
};

function getCategory(){
  const params = new URLSearchParams(window.location.search);
  return params.get("category");
}

function loadCategory(){
  const cat = getCategory();
  const items = DATA[cat] || [];

  // FIX: Use the global updateProgress function to track initial category viewing
  if (typeof updateProgress === 'function') {
    updateProgress('level3', cat, 0.1); 
  } else {
    console.log("Progress tracked: " + cat);
  }

  document.getElementById("categoryTitle").textContent =
    cat ? "Kategorie: " + cat.charAt(0).toUpperCase() + cat.slice(1) : "Kategorie";
  
  document.getElementById("content").innerHTML = items.map((i, index) => `
  <div class="item-card">
    <div class="question">F: ${i.q}</div>
    <div class="answer" style="font-style: italic; color: #666;">${i.q_en}</div>
    ${i.a ? `<div class="answer">A: ${i.a}</div>` : ""}
    ${i.a ? `<div class="answer" style="font-style: italic; color: #666;">${i.a_en}</div>` : ""}
    <button class="speak-btn" onclick="speak('${i.q}', '${cat}', ${index})">ðŸ”Š Question</button>
    ${i.a ? `<button class="speak-btn" onclick="speak('${i.a}', '${cat}', ${index}, true)">ðŸ”Š Answer</button>` : ""}
  </div>
`).join("");

}

function speak(text, category, index, isAnswer = false){
  const utter = new SpeechSynthesisUtterance(text);
  utter.lang = "de-DE";
  speechSynthesis.speak(utter);
  
  // Track progress using the item-specific tracking function
  if (typeof updateLevel3SentenceProgress === 'function') {
    updateLevel3SentenceProgress(category, index);
  }
}

function goBack(){
  window.location.href = "german.html";
}

loadCategory();

</script>
<script src="grprogress.js"></script>
<script src="script.js"></script>

</body>
</html>