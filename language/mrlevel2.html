<!DOCTYPE html>
<html lang="mr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#58CC02">
  <title>LinguaKids - Marathi Level 2</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link href="https://fonts.googleapis.com/css2?family=Baloo+2:wght@600;700&family=Quicksand:wght@400;500;600&display=swap" rel="stylesheet">
  <style>
    body, html { 
      margin: 0; 
      padding: 0; 
      font-family: 'Quicksand', sans-serif; 
      background:#f6f8ff; 
      overflow-x: hidden;
    }

    h2 { 
      text-align:center; 
      color:#58cc02; 
      font-family:'Baloo 2', cursive; 
    }

    .item-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
      gap: 20px;
      margin: 20px auto;
      padding: 0 15px;
      max-width: 1200px;
      box-sizing: border-box;
    }

    .item-card {
      background: white;
      padding: 15px;
      border-radius: 12px;
      text-align: center;
      box-shadow: 0 4px 8px rgba(0,0,0,0.1);
      cursor: pointer;
      transition: transform 0.2s;
    }
    
    .item-card:hover {
        transform: translateY(-4px);
    }

    .item-card div { margin: 5px 0; }

    .speak-btn {
      background: linear-gradient(to right,#58cc02,#1cb0f6);
      border: none; 
      color: white; 
      padding: 6px 12px;
      border-radius: 50px; 
      cursor: pointer;
      font-size: 0.9rem; 
      font-family: 'Baloo 2', cursive;
    }
    .speak-btn:hover { opacity: 0.9; }

    .btn {
      background: linear-gradient(to right,#58cc02,#1cb0f6);
      border: none; 
      color: white; 
      padding: 8px 20px; 
      border-radius: 50px;
      font-family: 'Baloo 2', cursive; 
      cursor: pointer; 
      margin: 10px 5px;
    }
    .btn:active { transform: scale(0.96); }

    @media (max-width: 600px) {
      .item-grid {
        grid-template-columns: repeat(2, 1fr);
      }
    }
  </style>
</head>
<body>
  <button onclick="goBack()" class="btn">Back</button>
  <h2 id="categoryTitle"></h2>
  <div id="content" class="item-grid"></div>

<script>
// ===== PAGE-SPECIFIC DATA AND FUNCTIONS =====

const DATA = {
  fruits: [
    {name: "à¤¸à¤«à¤°à¤šà¤‚à¤¦", english: "Apple", icon: "ðŸŽ"}, {name: "à¤•à¥‡à¤³à¥€", english: "Banana", icon: "ðŸŒ"}, {name: "à¤¸à¤‚à¤¤à¥à¤°à¥€", english: "Orange", icon: "ðŸŠ"}, {name: "à¤†à¤‚à¤¬à¤¾", english: "Mango", icon: "ðŸ¥­"}, {name: "à¤¦à¥à¤°à¤¾à¤•à¥à¤·à¥‡", english: "Grapes", icon: "ðŸ‡"}, {name: "à¤…à¤¨à¤¨à¤¸", english: "Pineapple", icon: "ðŸ"}, {name: "à¤¸à¥à¤Ÿà¥à¤°à¥‰à¤¬à¥‡à¤°à¥€", english: "Strawberry", icon: "ðŸ“"}, {name: "à¤•à¤²à¤¿à¤‚à¤—à¤¡", english: "Watermelon", icon: "ðŸ‰"}, {name: "à¤šà¥‡à¤°à¥€", english: "Cherry", icon: "ðŸ’"}, {name: "à¤ªà¥€à¤š", english: "Peach", icon: "ðŸ‘"}, {name: "à¤²à¤¿à¤‚à¤¬à¥‚", english: "Lemon", icon: "ðŸ‹"},
{name: "à¤¨à¤¾à¤¸à¤ªà¤¤à¥€", english: "Pear", icon: "ðŸ"},
{name: "à¤•à¥€à¤µà¥€", english: "Kiwi", icon: "ðŸ¥"},
{name: "à¤¡à¤¾à¤³à¤¿à¤‚à¤¬", english: "Pomegranate", icon: "ðŸŽ"}, 
{name: "à¤¨à¤¾à¤°à¤³", english: "Coconut", icon: "ðŸ¥¥"},
{name: "à¤ªà¥‡à¤°à¥‚", english: "Guava", icon: "ðŸ"}, 
{name: "à¤Ÿà¤°à¤¬à¥‚à¤œ", english: "Melon", icon: "ðŸˆ"}

  ],
  vegetables: [
    {name: "à¤—à¤¾à¤œà¤°", english: "Carrot", icon: "ðŸ¥•"}, {name: "à¤¬à¤Ÿà¤¾à¤Ÿà¤¾", english: "Potato", icon: "ðŸ¥”"}, {name: "à¤Ÿà¥‹à¤®à¥…à¤Ÿà¥‹", english: "Tomato", icon: "ðŸ…"}, {name: "à¤•à¥‹à¤¬à¥€", english: "Cabbage", icon: "ðŸ¥¬"}, {name: "à¤®à¤•à¤¾", english: "Corn", icon: "ðŸŒ½"}, {name: "à¤•à¤¾à¤‚à¤¦à¤¾", english: "Onion", icon: "ðŸ§…"}, {name: "à¤²à¤¸à¥‚à¤£", english: "Garlic", icon: "ðŸ§„"}, {name: "à¤¬à¥à¤°à¥‹à¤•à¥‹à¤²à¥€", english: "Broccoli", icon: "ðŸ¥¦"}, {name: "à¤•à¤¾à¤•à¤¡à¥€", english: "Cucumber", icon: "ðŸ¥’"}, {name: "à¤®à¤¿à¤°à¤šà¥€", english: "Chilli", icon: "ðŸŒ¶ï¸"}, 
{name: "à¤­à¥‹à¤ªà¤³à¤¾", english: "Pumpkin", icon: "ðŸŽƒ"},
{name: "à¤µà¤¾à¤‚à¤—à¥€", english: "Brinjal", icon: "ðŸ†"},
{name: "à¤ªà¤¾à¤²à¤•", english: "Spinach", icon: "ðŸ¥¬"},
{ name: "à¤®à¥‡à¤¥à¥€", english: "Fenugreek", icon: "ðŸŒ¿" },
{name: "à¤•à¥‹à¤‚à¤¥à¤¿à¤‚à¤¬à¥€à¤°", english: "Coriander", icon: "ðŸŒ±"},

  ],
  animals: [
    {name: "à¤¸à¤¿à¤‚à¤¹", english: "Lion", icon: "ðŸ¦"}, {name: "à¤µà¤¾à¤˜", english: "Tiger", icon: "ðŸ¯"}, {name: "à¤¹à¤¤à¥à¤¤à¥€", english: "Elephant", icon: "ðŸ˜"}, {name: "à¤•à¥à¤¤à¥à¤°à¤¾", english: "Dog", icon: "ðŸ¶"}, {name: "à¤®à¤¾à¤‚à¤œà¤°", english: "Cat", icon: "ðŸ±"}, {name: "à¤˜à¥‹à¤¡à¤¾", english: "Horse", icon: "ðŸ´"}, {name: "à¤®à¤¾à¤•à¤¡", english: "Monkey", icon: "ðŸµ"}, {name: "à¤—à¤¾à¤¯", english: "Cow", icon: "ðŸ„"}, {name: "à¤¸à¤¸à¤¾", english: "Rabbit", icon: "ðŸ‡"}, {name: "à¤®à¥‡à¤‚à¤¢à¥€", english: "Sheep", icon: "ðŸ‘"}, {name: "à¤…à¤¸à¥à¤µà¤²", english: "Bear", icon: "ðŸ»"},
{name: "à¤•à¥‹à¤²à¥à¤¹à¤¾", english: "Fox", icon: "ðŸ¦Š"},
{name: "à¤ªà¤¾à¤‚à¤¡à¤¾", english: "Panda", icon: "ðŸ¼"},
{name: "à¤¡à¥à¤•à¥à¤•à¤°", english: "Pig", icon: "ðŸ·"},
{name: "à¤‰à¤‚à¤Ÿ", english: "Camel", icon: "ðŸª"},
{name: "à¤®à¥‡à¤‚à¤¢à¤¾", english: "Ram", icon: "ðŸ"},
{name: "à¤•à¤¾à¤‚à¤—à¤¾à¤°à¥‚", english: "Kangaroo", icon: "ðŸ¦˜"},
{name: "à¤¸à¤¾à¤ª", english: "Snake", icon: "ðŸ"},
{name: "à¤®à¤—à¤°à¥€", english: "Crocodile", icon: "ðŸŠ"},
{name: "à¤¸à¤¸à¤¾", english: "Hare", icon: "ðŸ‡"}

  ],
  birds: [
    {name: "à¤ªà¥‹à¤ªà¤Ÿ", english: "Parrot", icon: "ðŸ¦œ"}, {name: "à¤•à¤¾à¤µà¤³à¤¾", english: "Crow", icon: "ðŸ¦"}, {name: "à¤®à¥‹à¤°", english: "Peacock", icon: "ðŸ¦š"}, {name: "à¤šà¤¿à¤®à¤£à¥€", english: "Sparrow", icon: "ðŸ¤"}, {name: "à¤˜à¥à¤¬à¤¡", english: "Owl", icon: "ðŸ¦‰"}, {name: "à¤¬à¤¦à¤•", english: "Duck", icon: "ðŸ¦†"}, {name: "à¤¹à¤‚à¤¸", english: "Swan", icon: "ðŸ¦¢"}, {name: "à¤•à¤¬à¥‚à¤¤à¤°", english: "Pigeon", icon: "ðŸ•Šï¸"}, {name: "à¤—à¤°à¥à¤¡", english: "Eagle", icon: "ðŸ¦…"}, {name: "à¤«à¥à¤²à¥‡à¤®à¤¿à¤‚à¤—à¥‹", english: "Flamingo", icon: "ðŸ¦©"}, 
{name: "à¤Ÿà¤°à¥à¤•à¥€", english: "Turkey", icon: "ðŸ¦ƒ"},
{name: "à¤•à¥‹à¤‚à¤¬à¤¡à¤¾", english: "Rooster", icon: "ðŸ“" },
{name: "à¤•à¥‹à¤‚à¤¬à¤¡à¥€", english: "Hen", icon: "ðŸ”"},
{name: "à¤—à¤¿à¤§à¤¾à¤¡", english: "Vulture", icon: "ðŸ¦…"},
{name: "à¤ªà¥‡à¤‚à¤—à¥à¤µà¤¿à¤¨", english: "Penguin", icon: "ðŸ§"},
{name: "à¤¹à¤®à¥à¤®à¤¿à¤‚à¤—à¤¬à¤°à¥à¤¡", english: "Hummingbird", icon: "ðŸ•Šï¸"},
{name: "à¤¸à¥€à¤—à¤²", english: "Seagull", icon: "ðŸ•Šï¸"}

  ],
  vehicles: [
    {name: "à¤•à¤¾à¤°", english: "Car", icon: "ðŸš—"}, {name: "à¤¬à¤¸", english: "Bus", icon: "ðŸšŒ"}, {name: "à¤Ÿà¥à¤°à¤•", english: "Truck", icon: "ðŸšš"}, {name: "à¤†à¤—à¤—à¤¾à¤¡à¥€", english: "Train", icon: "ðŸš†"}, {name: "à¤µà¤¿à¤®à¤¾à¤¨", english: "Airplane", icon: "âœˆï¸"}, {name: "à¤¸à¤¾à¤¯à¤•à¤²", english: "Bicycle", icon: "ðŸš²"}, {name: "à¤®à¥‹à¤Ÿà¤¾à¤°à¤¸à¤¾à¤¯à¤•à¤²", english: "Motorcycle", icon: "ðŸï¸"}, {name: "à¤¨à¤¾à¤µ", english: "Boat", icon: "â›µ"}, {name: "à¤¹à¥‡à¤²à¤¿à¤•à¥‰à¤ªà¥à¤Ÿà¤°", english: "Helicopter", icon: "ðŸš"}, {name: "à¤Ÿà¥à¤°à¥…à¤•à¥à¤Ÿà¤°", english: "Tractor", icon: "ðŸšœ"}, {name: "à¤°à¤¿à¤•à¥à¤·à¤¾", english: "Rickshaw", icon: "ðŸ›º"},
{name: "à¤®à¥‡à¤Ÿà¥à¤°à¥‹", english: "Metro Train", icon: "ðŸš‡"},
{name: "à¤¸à¥à¤•à¥‚à¤Ÿà¤°", english: "Scooter", icon: "ðŸ›µ"},
{name: "à¤œà¤¹à¤¾à¤œ", english: "Ship", icon: "ðŸš¢"},
{name: "à¤…à¤‚à¤¤à¤°à¤¾à¤³à¤¯à¤¾à¤¨", english: "Spaceship", icon: "ðŸš€"},
{name: "à¤«à¤¾à¤¯à¤° à¤Ÿà¥à¤°à¤•", english: "Fire Truck", icon: "ðŸš’"},
{name: "à¥²à¤®à¥à¤¬à¥à¤¯à¥à¤²à¤¨à¥à¤¸", english: "Ambulance", icon: "ðŸš‘"},
{name: "à¤ªà¥‹à¤²à¥€à¤¸ à¤•à¤¾à¤°", english: "Police Car", icon: "ðŸš“"},
{name: "à¤¸à¤¬à¤µà¥‡", english: "Subway", icon: "ðŸš‰"}
  ],
  colors: [
    {name: "à¤²à¤¾à¤²", english: "Red", icon: "ðŸ”´"}, {name: "à¤¨à¤¿à¤³à¤¾", english: "Blue", icon: "ðŸ”µ"}, {name: "à¤¹à¤¿à¤°à¤µà¤¾", english: "Green", icon: "ðŸŸ¢"}, {name: "à¤ªà¤¿à¤µà¤³à¤¾", english: "Yellow", icon: "ðŸŸ¡"}, {name: "à¤¨à¤¾à¤°à¤¿à¤‚à¤—à¥€", english: "Orange", icon: "ðŸŸ "}, {name: "à¤œà¤¾à¤‚à¤­à¤³à¤¾", english: "Purple", icon: "ðŸŸ£"}, {name: "à¤—à¥à¤²à¤¾à¤¬à¥€", english: "Pink", icon: "ðŸŒ¸"}, {name: "à¤¤à¤ªà¤•à¤¿à¤°à¥€", english: "Brown", icon: "ðŸŸ¤"}, {name: "à¤•à¤¾à¤³à¤¾", english: "Black", icon: "âš«"}, {name: "à¤ªà¤¾à¤‚à¤¢à¤°à¤¾", english: "White", icon: "âšª"}
  ]
};

const CATEGORY_NAMES = {
  fruits: "à¤«à¤³à¥‡ (Fruits)",
  vegetables: "à¤­à¤¾à¤œà¥à¤¯à¤¾ (Vegetables)",
  animals: "à¤ªà¥à¤°à¤¾à¤£à¥€ (Animals)",
  birds: "à¤ªà¤•à¥à¤·à¥€ (Birds)",
  vehicles: "à¤µà¤¾à¤¹à¤¨à¥‡ (Vehicles)",
  colors: "à¤°à¤‚à¤— (Colors)"
};

const urlParams = new URLSearchParams(window.location.search);
const category = urlParams.get('category');

/**
 * Tracks progress for a specific word by calling the global update function.
 * @param {string} category - The category of the word (e.g., 'fruits').
 * @param {number} index - The unique index of the item within its category.
 */
function trackWordProgress(category, index) {
  if (typeof updateMarathiProgress === 'function') {
    // Pass the index as the unique itemId for accurate tracking in mrprogress.js
    updateMarathiProgress('level2', category, index);
  }
}

function speakText(text) {
  if ('speechSynthesis' in window) {
    window.speechSynthesis.cancel(); // Prevent overlapping speech
    const utterance = new SpeechSynthesisUtterance(text);
    utterance.lang = 'mr-IN';
    utterance.rate = 0.8;
    speechSynthesis.speak(utterance);
  } else {
    alert('Speech synthesis not supported in this browser.');
  }
}

function goBack() {
  window.location.href = 'marathi.html';
}

// ===== INITIALIZATION =====

// Main logic to build the page content
if (category && DATA[category]) {
  document.getElementById('categoryTitle').textContent = CATEGORY_NAMES[category];
  
  // CORRECTED: Pass the 'index' to track each item individually
  document.getElementById('content').innerHTML = DATA[category].map((item, index) => `
  <div class="item-card" onclick="trackWordProgress('${category}', ${index})">
    <div style="font-size: 2rem;">${item.icon}</div>
    <div style="font-size: 1.5rem; font-weight: bold;">${item.name}</div>
    <div style="color: #666;">${item.english}</div>
    <button class="speak-btn" onclick="event.stopPropagation(); speakText('${item.name}'); trackWordProgress('${category}', ${index});">
      <i class="fas fa-volume-up"></i>
    </button>
  </div>
`).join('');
} else {
  document.getElementById('content').innerHTML = '<p>Category not found.</p>';
}

// Initialize the progress system when the page loads
document.addEventListener('DOMContentLoaded', function() {
  if (typeof initMarathiProgress === 'function') {
    initMarathiProgress();
  }
});
</script>

<script src="mrprogress.js"></script>
<script src="script.js"></script>

</body>
</html>