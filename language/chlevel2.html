<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#58CC02">
  <title>LinguaKids - Level 2 (Chinese)</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link href="https://fonts.googleapis.com/css2?family=Baloo+2:wght@600;700&family=Quicksand:wght@400;500;600&display=swap" rel="stylesheet">
<style>
  body, html { 
    margin: 0; 
    padding: 0; 
    font-family: 'Quicksand', sans-serif; 
    background:#f6f8ff; 
    overflow-x: hidden;
  }

  h2 { 
    text-align:center; 
    color:#58cc02; 
    font-family:'Baloo 2', cursive; 
  }

  .item-grid {
    display: grid;
    grid-template-columns: repeat(5, 1fr); /* 5 per row desktop */
    gap: 20px;
    margin: 20px auto;
    padding: 0 15px;
    max-width: 1200px;
    box-sizing: border-box;
  }

  .item-card {
    background: white;
    padding: 15px;
    border-radius: 12px;
    text-align: center;
    box-shadow: 0 4px 8px rgba(0,0,0,0.1);
    width: 100%;
    box-sizing: border-box;
    transition: transform 0.3s, box-shadow 0.3s;
  }

  .item-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 8px 15px rgba(0,0,0,0.15);
  }

  .item-card div { margin: 5px 0; }

  .item-card img {
    width: 50px;
    height: 50px;
    object-fit: contain;
  }

  .hanzi {
    font-size: 1.4rem;
    font-weight: bold;
    color: #333;
  }

  .pinyin {
    font-size: 1rem;
    color: #1cb0f6;
  }

  .english {
    font-size: 0.9rem;
    color: #555;
  }

  .speak-btn {
    background: linear-gradient(to right,#58cc02,#1cb0f6);
    border: none; 
    color: white; 
    padding: 6px 12px;
    border-radius: 50px; 
    cursor: pointer;
    font-size: 0.9rem; 
    font-family: 'Baloo 2', cursive;
    transition: all 0.3s;
  }
  .speak-btn:hover { 
    opacity: 0.9; 
    transform: scale(1.05);
  }

  .btn {
    background: linear-gradient(to right,#58cc02,#1cb0f6);
    border: none; 
    color: white; 
    padding: 8px 20px; 
    border-radius: 50px;
    font-family: 'Baloo 2', cursive; 
    cursor: pointer; 
    margin: 10px 5px;
    transition: all 0.3s;
  }
  .btn:active { transform: scale(0.96); }
  .btn:hover { opacity: 0.9; }

  @media (max-width: 900px) {
    .item-grid {
      grid-template-columns: repeat(3, 1fr);
      max-width: 100%;
      padding: 0 10px;
    }
  }

  @media (max-width: 600px) {
    .item-grid {
      grid-template-columns: repeat(2, 1fr);
      max-width: 100%;
      padding: 0 8px;
    }
  }

  /* Toast notification styles */
  .toast {
    position: fixed;
    bottom: 20px;
    right: 20px;
    background: #58cc02;
    color: white;
    padding: 15px 20px;
    border-radius: 8px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.15);
    z-index: 1000;
    display: flex;
    align-items: center;
    gap: 10px;
    transform: translateY(100px);
    opacity: 0;
    transition: transform 0.3s, opacity 0.3s;
  }

  .toast.show {
    transform: translateY(0);
    opacity: 1;
  }

  /* Category navigation */
  .category-nav {
    display: flex;
    justify-content: center;
    gap: 10px;
    margin: 20px 0;
    flex-wrap: wrap;
  }

  .category-btn {
    background: #e0e0e0;
    border: none;
    padding: 8px 15px;
    border-radius: 20px;
    cursor: pointer;
    transition: all 0.3s;
  }

  .category-btn.active {
    background: #58cc02;
    color: white;
  }

  .category-btn:hover {
    background: #d0d0d0;
  }

  .category-btn.active:hover {
    background: #4bb802;
  }

  /* Back button positioning */
  .back-button-container {
    position: fixed;
    top: 15px;
    left: 15px;
    z-index: 1000;
  }

  .back-button-container .btn {
    margin: 0;
    box-shadow: 0 2px 5px rgba(0,0,0,0.2);
  }

  /* Main content area */
  #content {
    padding-top: 60px;
    position: relative;
    z-index: 1;
  }

  @media (max-width: 600px) {
    .back-button-container {
      top: 10px;
      left: 10px;
    }
    
    .back-button-container .btn {
      padding: 8px 16px;
      font-size: 0.9rem;
    }
    
    #content {
      padding-top: 50px;
    }
  }
</style>
</head>
<body>
  <div class="back-button-container">
    <button onclick="goBack()" class="btn">Back</button>
  </div>
  
  <div id="content">
    <h2 id="categoryTitle"></h2>
    
    <!-- Category Navigation -->
    <div class="category-nav">
      <button class="category-btn" onclick="changeCategory('fruits')">Fruits</button>
      <button class="category-btn" onclick="changeCategory('vegetables')">Vegetables</button>
      <button class="category-btn" onclick="changeCategory('animals')">Animals</button>
      <button class="category-btn" onclick="changeCategory('nature')">Nature</button>
    </div>
    
    <div class="item-grid" id="itemGrid"></div>
  </div>

  <!-- Toast Notification -->
  <div id="achievementToast" class="toast">
    <i class="fas fa-trophy"></i>
    <div>
      <div id="toastTitle">ÊàêÂ∞±Ëß£ÈîÅ! Achievement Unlocked!</div>
      <div id="toastDesc">You've earned a new badge.</div>
    </div>
  </div>

<script>
const DATA = {
  fruits: [
    {char: "ËãπÊûú", pinyin: "p√≠nggu«í", english: "Apple", icon: "üçé"},
    {char: "È¶ôËïâ", pinyin: "xiƒÅngjiƒÅo", english: "Banana", icon: "üçå"},
    {char: "Ê©ôÂ≠ê", pinyin: "ch√©ngzi", english: "Orange", icon: "üçä"},
    {char: "ËäíÊûú", pinyin: "m√°nggu«í", english: "Mango", icon: "ü•≠"},
    {char: "Ëë°ËêÑ", pinyin: "p√∫t√°o", english: "Grapes", icon: "üçá"},
    {char: "Ëè†Ëêù", pinyin: "b≈çlu√≥", english: "Pineapple", icon: "üçç"},
    {char: "ËçâËéì", pinyin: "c«éom√©i", english: "Strawberry", icon: "üçì"},
    {char: "Ë•øÁìú", pinyin: "xƒ´guƒÅ", english: "Watermelon", icon: "üçâ"},
    {char: "Ê®±Ê°É", pinyin: "yƒ´ngt√°o", english: "Cherry", icon: "üçí"},
    {char: "Ê°É", pinyin: "t√°o", english: "Peach", icon: "üçë"},
    {char: "Ê¢®", pinyin: "l√≠", english: "Pear", icon: "üçê"},
{char: "Êü†Ê™¨", pinyin: "n√≠ngm√©ng", english: "Lemon", icon: "üçã"},
{char: "ÁåïÁå¥Ê°É", pinyin: "m√≠h√≥ut√°o", english: "Kiwi", icon: "ü•ù"},
{char: "Êú®Áìú", pinyin: "m√πguƒÅ", english: "Papaya", icon: "üçà"},
{char: "Áü≥Ê¶¥", pinyin: "sh√≠liu", english: "Pomegranate", icon: "üçé"},
{char: "Ê§∞Â≠ê", pinyin: "yƒìzi", english: "Coconut", icon: "ü••"},
{char: "ÊùéÂ≠ê", pinyin: "l«êzi", english: "Plum", icon: "üçë"},
{char: "Ëë°ËêÑÊüö", pinyin: "p√∫t√°oy√≤u", english: "Grapefruit", icon: "üçä"}

  ],
  vegetables: [
    {char: "ËÉ°ËêùÂçú", pinyin: "h√∫lu√≥bo", english: "Carrot", icon: "ü•ï"},
    {char: "ÂúüË±Ü", pinyin: "t«îd√≤u", english: "Potato", icon: "ü•î"},
    {char: "Ë•øÁ∫¢Êüø", pinyin: "xƒ´h√≥ngsh√¨", english: "Tomato", icon: "üçÖ"},
    {char: "ÁôΩËèú", pinyin: "b√°ic√†i", english: "Cabbage", icon: "ü•¨"},
    {char: "ÁéâÁ±≥", pinyin: "y√πm«ê", english: "Corn", icon: "üåΩ"},
    {char: "Ê¥ãËë±", pinyin: "y√°ngc≈çng", english: "Onion", icon: "üßÖ"},
    {char: "Ëíú", pinyin: "su√†n", english: "Garlic", icon: "üßÑ"},
    {char: "Ë•øÂÖ∞Ëä±", pinyin: "xƒ´l√°nhuƒÅ", english: "Broccoli", icon: "ü•¶"},
    {char: "ÈªÑÁìú", pinyin: "hu√°ngguƒÅ", english: "Cucumber", icon: "ü•í"},
    {char: "Ëæ£Ê§í", pinyin: "l√†jiƒÅo", english: "Pepper", icon: "üå∂Ô∏è"},
    {char: "Ëè†Ëèú", pinyin: "b≈çc√†i", english: "Spinach", icon: "ü•¨"},
{char: "ËòëËèá", pinyin: "m√≥g≈´", english: "Mushroom", icon: "üçÑ"},
{char: "Á∫¢ËñØ", pinyin: "h√≥ngsh«î", english: "Sweet Potato", icon: "üç†"},
{char: "ËåÑÂ≠ê", pinyin: "qi√©zi", english: "Eggplant", icon: "üçÜ"},
{char: "ÁîüËèú", pinyin: "shƒìngc√†i", english: "Lettuce", icon: "ü•¨"},
{char: "Ëë±", pinyin: "c≈çng", english: "Spring Onion", icon: "üåø"},
{char: "ÂçóÁìú", pinyin: "n√°nguƒÅ", english: "Pumpkin", icon: "üéÉ"}
  ],
  animals: [
    {char: "ÁãÆÂ≠ê", pinyin: "shƒ´zi", english: "Lion", icon: "ü¶Å"},
    {char: "ËÄÅËôé", pinyin: "l«éoh«î", english: "Tiger", icon: "üêØ"},
    {char: "Â§ßË±°", pinyin: "d√†xi√†ng", english: "Elephant", icon: "üêò"},
    {char: "Áãó", pinyin: "g«íu", english: "Dog", icon: "üê∂"},
    {char: "Áå´", pinyin: "mƒÅo", english: "Cat", icon: "üê±"},
    {char: "È©¨", pinyin: "m«é", english: "Horse", icon: "üê¥"},
    {char: "Áå¥", pinyin: "h√≥u", english: "Monkey", icon: "üêµ"},
    {char: "Áâõ", pinyin: "ni√∫", english: "Cow", icon: "üêÑ"},
    {char: "ÂÖî", pinyin: "t√π", english: "Rabbit", icon: "üêá"},
    {char: "Áæä", pinyin: "y√°ng", english: "Sheep", icon: "üêë"},
    {char: "ÁÜä", pinyin: "xi√≥ng", english: "Bear", icon: "üêª"},
{char: "ÁÜäÁå´", pinyin: "xi√≥ngmƒÅo", english: "Panda", icon: "üêº"},
{char: "Ëõá", pinyin: "sh√©", english: "Snake", icon: "üêç"},
{char: "È±º", pinyin: "y√∫", english: "Fish", icon: "üêü"},
{char: "ÈùíËõô", pinyin: "qƒ´ngwƒÅ", english: "Frog", icon: "üê∏"},
{char: "ÁãêÁã∏", pinyin: "h√∫l√≠", english: "Fox", icon: "ü¶ä"},
{char: "‰ºÅÈπÖ", pinyin: "q«ê'√©", english: "Penguin", icon: "üêß"},
{char: "‰πåÈæü", pinyin: "w≈´guƒ´", english: "Turtle", icon: "üê¢"}
  ],
  nature: [
    {char: "Êúà‰∫Æ", pinyin: "yu√®liang", english: "Moon", icon: "üåï"},   
    {char: "Ê≤≥", pinyin: "h√©", english: "River", icon: "üèûÔ∏è"},   
    {char: "Â±±", pinyin: "shƒÅn", english: "Mountain", icon: "‚õ∞Ô∏è"},     
    {char: "Ê†ë", pinyin: "sh√π", english: "Tree", icon: "üå≥"},          
    {char: "ÁÅ´", pinyin: "hu«í", english: "Fire", icon: "üî•"},            
    {char: "Ê∞¥", pinyin: "shu«ê", english: "Water", icon: "üíß"},           
    {char: "Êµ∑", pinyin: "h«éi", english: "Sea", icon: "üåä"},              
    {char: "Ëä±", pinyin: "huƒÅ", english: "Flower", icon: "üå∏"},          
    {char: "È£é", pinyin: "fƒìng", english: "Wind", icon: "üå¨Ô∏è"},           
    {char: "‰∫ë", pinyin: "y√∫n", english: "Cloud", icon: "‚òÅÔ∏è"},
    {char: "Â§™Èò≥", pinyin: "t√†iy√°ng", english: "Sun", icon: "‚òÄÔ∏è"},
{char: "ÊòüÊòü", pinyin: "xƒ´ngxing", english: "Star", icon: "‚≠ê"},
{char: "Èõ®", pinyin: "y«î", english: "Rain", icon: "üåßÔ∏è"},
{char: "Èõ™", pinyin: "xuƒõ", english: "Snow", icon: "‚ùÑÔ∏è"},
{char: "Ê£ÆÊûó", pinyin: "sƒìnl√≠n", english: "Forest", icon: "üå≤"},
{char: "Ëçâ", pinyin: "c«éo", english: "Grass", icon: "üåø"},
{char: "Â§©Á©∫", pinyin: "tiƒÅnk≈çng", english: "Sky", icon: "üåå"},
{char: "Èó™Áîµ", pinyin: "sh«éndi√†n", english: "Lightning", icon: "‚ö°"}

  ]
};

let currentCategory = 'fruits';

function getCategory() {
  const urlParams = new URLSearchParams(window.location.search);
  return urlParams.get('category') || 'fruits'; // Default to fruits if no category
}

function getCategoryTitle(category) {
  const categoryTitles = {
    fruits: "Ê∞¥Êûú (Fruits)",
    vegetables: "Ëî¨Ëèú (Vegetables)", 
    animals: "Âä®Áâ© (Animals)",
    nature: "Ëá™ÁÑ∂ (Nature)"
  };
  return categoryTitles[category] || "Category";
}

function loadCategory(category = null){
  if (category) {
    currentCategory = category;
    // Update URL without page reload
    const newUrl = `${window.location.pathname}?category=${category}`;
    window.history.replaceState({}, '', newUrl);
  } else {
    currentCategory = getCategory();
  }
  
  const items = DATA[currentCategory] || [];

  document.getElementById("categoryTitle").textContent = getCategoryTitle(currentCategory);

  // Update active category button
  document.querySelectorAll('.category-btn').forEach(btn => {
    btn.classList.remove('active');
    if (btn.textContent.toLowerCase() === currentCategory) {
      btn.classList.add('active');
    }
  });

  document.getElementById("itemGrid").innerHTML = items.map(i => `
    <div class="item-card">
      <div style="font-size:2rem;">${i.icon}</div>
      <div class="hanzi">${i.char}</div>
      <div class="pinyin">${i.pinyin}</div>
      <div class="english">${i.english}</div>
      <button class="speak-btn" onclick="speak('${i.char}', '${currentCategory}')">üîä Speak</button>
    </div>
  `).join("");
}

function changeCategory(category) {
  loadCategory(category);
}

function speak(chineseChar, category){
  const utter = new SpeechSynthesisUtterance(chineseChar);
  utter.lang = "zh-CN";
  speechSynthesis.speak(utter);
  
  trackWordInteraction(category);
}

function trackWordInteraction(category) {
  // Use a more specific key to track individual interactions
  const interactionKey = `word_interaction_${category}_${new Date().toDateString()}`;
  let interactions = parseInt(sessionStorage.getItem(interactionKey) || '0');
  
  interactions++;
  sessionStorage.setItem(interactionKey, interactions.toString());
  
  // Award progress for every 2 interactions to prevent overcounting
  if (interactions % 2 === 0 && typeof updateProgress === 'function') {
    updateProgress('level2', category, 1);
  }
}

function goBack(){
  window.location.href = "chinese.html";
}

// Ensure the page loads content on DOM ready
document.addEventListener('DOMContentLoaded', function() {
  loadCategory();
});
</script>
<script src="script.js"></script>
<script src="chprogress.js"></script>

</body>
</html>