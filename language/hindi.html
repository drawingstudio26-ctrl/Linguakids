<!DOCTYPE html>
<html lang="hi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#58CC02">
  <title>LinguaKids - Hindi</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link href="https://fonts.googleapis.com/css2?family=Baloo+2:wght@600;700&family=Quicksand:wght@400;500;600&display=swap" rel="stylesheet">
<style>
    body {
        font-family: 'Quicksand', Arial, sans-serif;
        background: linear-gradient(135deg, #e0eaff 0%, #f6f0ff 100%);
        margin: 0;
        padding: 0;
    }
    
    #app { 
        max-width: 1000px; 
        margin: auto; 
        padding: 15px; 
        position: relative;
        padding-top: 50px;
    }
    
    h2 { 
        text-align: center; 
        color: #58cc02; 
        font-family: 'Baloo 2', cursive; 
    }
    
    .sub-container, .letters-grid, .numbers-grid {
        display: grid; 
        grid-template-columns: repeat(auto-fit, minmax(90px, 1fr));
        gap: 15px; 
        margin-top: 20px;
    }
    
    .sub-card, .letter-card, .number-card {
        background: white; 
        padding: 20px; 
        border-radius: 12px;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.05); 
        text-align: center;
        cursor: pointer; 
        transition: transform 0.3s, box-shadow 0.3s;
        word-wrap: break-word;
        overflow-wrap: break-word;
        white-space: normal;
    }
    
    .letter-card, .number-card {
        display: flex;
        flex-direction: column;
        align-items: center;
        min-height: 140px;
        justify-content: space-between;
    }
    
    .sub-card:hover, .letter-card:hover, .number-card:hover {
        transform: translateY(-5px); 
        box-shadow: 0 8px 15px rgba(0, 0, 0, 0.1);
    }
    
    .main-char { 
        font-size: 2rem; 
        font-weight: bold; 
        color: #58cc02; 
    }
    
    .small-char { 
        font-size: 1.2rem; 
        color: #1cb0f6; 
    }
    
    .example { 
        margin-top: 5px; 
        font-size: 1rem; 
        line-height: 1.2;
    }
    
    .letter-card .example, .number-card .example {
        font-size: 0.9rem;
        max-height: 2.4em;
        overflow: hidden;
        text-overflow: ellipsis;
        display: -webkit-box;
        -webkit-line-clamp: 2;
        -webkit-box-orient: vertical;
        line-clamp: 2;
    }
    
    .balls { 
        font-size: 1.5rem; 
        margin-top: 10px; 
        word-wrap: break-word; 
    }
    
    .btn {
        background: linear-gradient(to right, #58cc02, #1cb0f6);
        border: none; 
        color: white; 
        padding: 8px 20px; 
        border-radius: 50px;
        font-family: 'Baloo 2', cursive; 
        cursor: pointer; 
        margin: 10px 5px;
        transition: transform 0.2s;
    }
    
    .btn:active { 
        transform: scale(0.96); 
    }
    
    .lesson-controls {
        display: flex; 
        justify-content: center; 
        gap: 10px; 
        margin-top: 15px;
        flex-wrap: wrap;
    }
    
    canvas {
        border: 2px solid #ccc; 
        border-radius: 12px; 
        background: #fff;
        display: block; 
        margin: 15px auto;
    }
    
    .lesson-container {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        text-align: center;
        margin-top: 20px;
    }
    
    .lesson-container .main-char {
        font-size: 3rem;
    }
    
    .lesson-container .example {
        font-size: 1.3rem;
        margin: 10px 0;
    }
    
    .trace-area {
        display: flex;
        flex-direction: column;
        align-items: center;
        margin: 10px 0;
    }
    
    .clear-btn {
        background: #ff6b6b;
        padding: 5px 15px;
        font-size: 0.9rem;
        border-radius: 8px;
        margin-top: 8px;
        transition: background 0.3s;
    }
    
    .clear-btn:hover {
        background: #ff5252;
    }
    
    .sub-card h3 {
        font-size: 1.1rem;
        margin: 5px 0;
    }
    
    .sub-card p {
        font-size: 0.9rem;
        margin: 0;
        line-height: 1.2;
    }
    
    /* Toast notifications */
    .toast {
        position: fixed;
        bottom: 20px;
        right: 20px;
        background: #58cc02;
        color: white;
        padding: 15px 20px;
        border-radius: 8px;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        z-index: 1000;
        display: flex;
        align-items: center;
        gap: 10px;
        transform: translateY(100px);
        opacity: 0;
        transition: transform 0.3s, opacity 0.3s;
    }
    
    .toast.show {
        transform: translateY(0);
        opacity: 1;
    }
    
    /* Sound button */
    .sound-btn {
        background: #1cb0f6;
        border: none;
        border-radius: 50%;
        width: 36px;
        height: 36px;
        color: white;
        font-size: 1rem;
        cursor: pointer;
        margin-top: 8px;
        transition: all 0.2s;
    }
    
    .sound-btn:hover {
        background: #0a9bd8;
        transform: scale(1.05);
    }
    
    .sound-btn:active {
        transform: scale(0.95);
    }
    
    /* Tab navigation */
    .tab-container {
        display: flex;
        justify-content: center;
        margin: 20px 0;
        flex-wrap: wrap;
    }
    
    .tab-btn {
        background: #e0e0e0;
        border: none;
        padding: 10px 20px;
        margin: 0 5px;
        border-radius: 20px;
        cursor: pointer;
        font-family: 'Baloo 2', cursive;
        transition: all 0.3s;
    }
    
    .tab-btn.active {
        background: linear-gradient(to right, #58cc02, #1cb0f6);
        color: white;
    }
    
    .tab-btn:hover:not(.active) {
        background: #d0d0d0;
    }
    
    /* Numbers grid for 1-100 */
    .numbers-grid-100 {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(80px, 1fr));
        gap: 10px;
        margin-top: 20px;
    }
    
    .number-card-100 {
        background: white;
        padding: 10px;
        border-radius: 8px;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
        text-align: center;
        cursor: pointer;
        transition: 0.3s;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: space-between;
    }
    
    .number-card-100:hover {
        transform: translateY(-3px);
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    }
    
    .number-card-100 .main-char {
        font-size: 1.5rem;
        margin-bottom: 5px;
    }
    
    .number-card-100 .small-char {
        font-size: 0.9rem;
        color: #1cb0f6;
    }
    
    /* Pagination */
    .pagination {
        display: flex;
        justify-content: center;
        margin: 20px 0;
        gap: 10px;
        flex-wrap: wrap;
    }
    
    .pagination-btn {
        background: #e0e0e0;
        border: none;
        padding: 8px 15px;
        border-radius: 5px;
        cursor: pointer;
        transition: all 0.3s;
        font-size: 0.9rem;
    }
    
    .pagination-btn.active {
        background: #58cc02;
        color: white;
    }
    
    .pagination-btn:hover:not(.active) {
        background: #d0d0d0;
    }
    
    /* Back button */
    #globalBack, .back-btn-lesson {
        position: fixed;
        top: 15px;
        left: 15px;
        z-index: 1000;
        margin: 0;
        background: linear-gradient(to right, #58cc02, #1cb0f6);
        border: none;
        color: white;
        padding: 8px 15px;
        border-radius: 50px;
        font-family: 'Baloo 2', cursive;
        cursor: pointer;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
        transition: transform 0.2s, box-shadow 0.2s;
    }
    
    #globalBack:hover, .back-btn-lesson:hover {
        transform: translateY(-2px);
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
    }
    
    #globalBack:active, .back-btn-lesson:active {
        transform: scale(0.95);
    }
    
    /* Progress indicator */
    .progress-indicator {
        position: absolute;
        top: 10px;
        right: 15px;
        background: #58cc02;
        color: white;
        padding: 5px 10px;
        border-radius: 15px;
        font-size: 0.8rem;
        font-family: 'Baloo 2', cursive;
    }
    
    /* Mobile responsiveness */
    @media (max-width: 600px) {
        .main-char { font-size: 1.5rem; } 
        .small-char { font-size: 1rem; } 
        .example { font-size: 0.9rem; }
        
        .sub-container {
            grid-template-columns: repeat(2, 1fr);
        }
        
        .sub-card {
            padding: 15px;
        }
        
        .sub-card h3 { 
            font-size: 1rem; 
        }
        
        .sub-card p { 
            font-size: 0.8rem; 
        }
        
        #globalBack, .back-btn-lesson {
            top: 10px;
            left: 10px;
            padding: 6px 12px;
            font-size: 0.9rem;
        }
        
        #app {
            padding-top: 45px;
        }
        
        .lesson-container .main-char {
            font-size: 2.5rem;
        }
        
        .lesson-container .example {
            font-size: 1.1rem;
        }
        
        .progress-indicator {
            top: 5px;
            right: 10px;
            font-size: 0.7rem;
            padding: 3px 8px;
        }
    }
</style>
</head>
<body>
  <button id="globalBack" onclick="goBackHome()">Back</button>
<div id="app">
  <div class="progress-indicator" id="progressIndicator">Progress: 0%</div>
  <div id="learning-content"></div>
</div>

<div id="achievementToast" class="toast">
  <i class="fas fa-trophy"></i>
  <div>
    <div id="toastTitle">Achievement Unlocked!</div>
    <div id="toastDesc">You've earned a new badge.</div>
  </div>
</div>

<script>
// ===== DATA CONSTANTS =====
const VOWELS = [
  {hindi:"рдЕ", english:"a", word:"рдЕрдирд╛рд░ (Pomegranate ЁЯНО)", pronunciation:"a"},
  {hindi:"рдЖ", english:"aa", word:"рдЖрдо (Mango ЁЯен)", pronunciation:"aa"},
  {hindi:"рдЗ", english:"i", word:"рдЗрдорд▓реА (Tamarind ЁЯМ┐)", pronunciation:"i"},
  {hindi:"рдИ", english:"ee", word:"рдИрдЦ (Sugarcane ЁЯОЛ)", pronunciation:"ee"},
  {hindi:"рдЙ", english:"u", word:"рдЙрд▓реНрд▓реВ (Owl ЁЯжЙ)", pronunciation:"u"},
  {hindi:"рдК", english:"oo", word:"рдКрди (Wool ЁЯз╢)", pronunciation:"oo"},
  {hindi:"рдП", english:"e", word:"рдПрдХ (One 1я╕ПтГг)", pronunciation:"e"},
  {hindi:"рдР", english:"ai", word:"рдРрдирдХ (Spectacles ЁЯСУ)", pronunciation:"ai"},
  {hindi:"рдУ", english:"o", word:"рдУрд╕ (Dew ЁЯТз)", pronunciation:"o"},
  {hindi:"рдФ", english:"au", word:"рдФрд░рдд (Woman ЁЯСй)", pronunciation:"au"},
  {hindi:"рдЕрдВ", english:"am", word:"рдЕрдВрдЧреВрд░ (Grapes ЁЯНЗ)", pronunciation:"am"},
  {hindi:"рдЕрдГ", english:"ah", word:"рдЕрдГ (Auspicious sign ЁЯЩП)", pronunciation:"ah"}
];

const CONSONANTS = [
  {hindi:"рдХ", english:"ka", word:"рдХрдмреВрддрд░ (Pigeon ЁЯХКя╕П)", pronunciation:"ka"}, {hindi:"рдЦ", english:"kha", word:"рдЦрд░рдЧреЛрд╢ (Rabbit ЁЯРЗ)", pronunciation:"kha"}, {hindi:"рдЧ", english:"ga", word:"рдЧрд╛рдп (Cow ЁЯРД)", pronunciation:"ga"}, {hindi:"рдШ", english:"gha", word:"рдШрд░ (House ЁЯПа)", pronunciation:"gha"}, {hindi:"рдЩ", english:"nga", word:"рдЩ (Velar nasal)", pronunciation:"nga"}, {hindi:"рдЪ", english:"cha", word:"рдЪрд╛рдмреА (Key ЁЯФС)", pronunciation:"cha"}, {hindi:"рдЫ", english:"chha", word:"рдЫрддрд░реА (Umbrella тШВя╕П)", pronunciation:"chha"}, {hindi:"рдЬ", english:"ja", word:"рдЬрд╣рд╛рдЬ (Ship ЁЯЪв)", pronunciation:"ja"}, {hindi:"рдЭ", english:"jha", word:"рдЭрдВрдбрд╛ (Flag ЁЯЪй)", pronunciation:"jha"}, {hindi:"рдЮ", english:"nya", word:"рдЮ (Palatal nasal)", pronunciation:"nya"}, {hindi:"рдЯ", english:"ta", word:"рдЯрдорд╛рдЯрд░ (Tomato ЁЯНЕ)", pronunciation:"ta"}, {hindi:"рда", english:"tha", word:"рдареЗрд▓рд╛ (Cart ЁЯЫТ)", pronunciation:"tha"}, {hindi:"рдб", english:"da", word:"рдбрдорд░реВ (Drum ЁЯеБ)", pronunciation:"da"}, {hindi:"рдв", english:"dha", word:"рдвреЛрд▓ (Drum ЁЯеБ)", pronunciation:"dha"}, {hindi:"рдг", english:"na", word:"рдг (Retroflex nasal)", pronunciation:"na"}, {hindi:"рдд", english:"ta", word:"рддрд░рдмреВрдЬ (Watermelon ЁЯНЙ)", pronunciation:"ta"}, {hindi:"рде", english:"tha", word:"рдереИрд▓рд╛ (Bag ЁЯОТ)", pronunciation:"tha"}, {hindi:"рдж", english:"da", word:"рджрд░рд╡рд╛рдЬрд╛ (Door ЁЯЪк)", pronunciation:"da"}, {hindi:"рдз", english:"dha", word:"рдзрдиреБрд╖ (Bow ЁЯП╣)", pronunciation:"dha"}, {hindi:"рди", english:"na", word:"рдирд╛рд░рд┐рдпрд▓ (Coconut ЁЯее)", pronunciation:"na"}, {hindi:"рдк", english:"pa", word:"рдкрддрдВрдЧ (Kite ЁЯкБ)", pronunciation:"pa"}, {hindi:"рдл", english:"pha", word:"рдлрд▓ (Fruit ЁЯНО)", pronunciation:"pha"}, {hindi:"рдм", english:"ba", word:"рдмрддреНрддрдЦ (Duck ЁЯжЖ)", pronunciation:"ba"}, {hindi:"рдн", english:"bha", word:"рднрд╛рд▓реВ (Bear ЁЯР╗)", pronunciation:"bha"}, {hindi:"рдо", english:"ma", word:"рдордЫрд▓реА (Fish ЁЯРЯ)", pronunciation:"ma"}, {hindi:"рдп", english:"ya", word:"рдпреЛрдЧ (Yoga ЁЯзШ)", pronunciation:"ya"}, {hindi:"рд░", english:"ra", word:"рд░рде (Chariot ЁЯЫ║)", pronunciation:"ra"}, {hindi:"рд▓", english:"la", word:"рд▓рдЯреНрдЯреВ (Top ЁЯОп)", pronunciation:"la"}, {hindi:"рд╡", english:"va", word:"рд╡рд░реНрд╖рд╛ (Rain ЁЯМзя╕П)", pronunciation:"va"}, {hindi:"рд╢", english:"sha", word:"рд╢реЗрд░ (Lion ЁЯжБ)", pronunciation:"sha"}, {hindi:"рд╖", english:"sha", word:"рд╖рдЯреНрдХреЛрдг (Hexagon тмв)", pronunciation:"sha"}, {hindi:"рд╕", english:"sa", word:"рд╕рд╛рдк (Snake ЁЯРН)", pronunciation:"sa"}, {hindi:"рд╣", english:"ha", word:"рд╣рд╛рдереА (Elephant ЁЯРШ)", pronunciation:"ha"}, {hindi:"рдХреНрд╖", english:"ksha", word:"рдХреНрд╖рддреНрд░рд┐рдп (Warrior тЪФя╕П)", pronunciation:"ksha"}, {hindi:"рддреНрд░", english:"tra", word:"рддреНрд░рд┐рд╢реВрд▓ (Trident ЁЯФ▒)", pronunciation:"tra"}, {hindi:"рдЬреНрдЮ", english:"gya", word:"рдЬреНрдЮрд╛рди (Knowledge ЁЯУЪ)", pronunciation:"gya"}
];

const NUMBERS_1_TO_100 = [
    { hindi: "рез", english: "1", word: "рдПрдХ", pronunciation: "ek" }, { hindi: "реи", english: "2", word: "рджреЛ", pronunciation: "do" }, { hindi: "рей", english: "3", word: "рддреАрди", pronunciation: "teen" }, { hindi: "рек", english: "4", word: "рдЪрд╛рд░", pronunciation: "chaar" }, { hindi: "рел", english: "5", word: "рдкрд╛рдБрдЪ", pronunciation: "paanch" }, { hindi: "рем", english: "6", word: "рдЫрд╣", pronunciation: "chhah" }, { hindi: "рен", english: "7", word: "рд╕рд╛рдд", pronunciation: "saat" }, { hindi: "рео", english: "8", word: "рдЖрда", pronunciation: "aath" }, { hindi: "реп", english: "9", word: "рдиреМ", pronunciation: "nau" }, { hindi: "резреж", english: "10", word: "рджрд╕", pronunciation: "das" },
    { hindi: "резрез", english: "11", word: "рдЧреНрдпрд╛рд░рд╣", pronunciation: "gyaarah" }, { hindi: "резреи", english: "12", word: "рдмрд╛рд░рд╣", pronunciation: "baarah" }, { hindi: "резрей", english: "13", word: "рддреЗрд░рд╣", pronunciation: "terah" }, { hindi: "резрек", english: "14", word: "рдЪреМрджрд╣", pronunciation: "chaudah" }, { hindi: "резрел", english: "15", word: "рдкрдВрджреНрд░рд╣", pronunciation: "pandrah" }, { hindi: "резрем", english: "16", word: "рд╕реЛрд▓рд╣", pronunciation: "solah" }, { hindi: "резрен", english: "17", word: "рд╕рддреНрд░рд╣", pronunciation: "satrah" }, { hindi: "резрео", english: "18", word: "рдЕрдард╛рд░рд╣", pronunciation: "athaarah" }, { hindi: "резреп", english: "19", word: "рдЙрдиреНрдиреАрд╕", pronunciation: "unnees" }, { hindi: "реиреж", english: "20", word: "рдмреАрд╕", pronunciation: "bees" },
    { hindi: "реирез", english: "21", word: "рдЗрдХреНрдХреАрд╕", pronunciation: "ikkees" }, { hindi: "реиреи", english: "22", word: "рдмрд╛рдИрд╕", pronunciation: "baaees" }, { hindi: "реирей", english: "23", word: "рддреЗрдИрд╕", pronunciation: "teees" }, { hindi: "реирек", english: "24", word: "рдЪреМрдмреАрд╕", pronunciation: "chaubees" }, { hindi: "реирел", english: "25", word: "рдкрдЪреНрдЪреАрд╕", pronunciation: "pachchees" }, { hindi: "реирем", english: "26", word: "рдЫрдмреНрдмреАрд╕", pronunciation: "chhabbees" }, { hindi: "реирен", english: "27", word: "рд╕рддреНрддрд╛рдИрд╕", pronunciation: "sattaees" }, { hindi: "реирео", english: "28", word: "рдЕрдЯреНрдард╛рдИрд╕", pronunciation: "aththaees" }, { hindi: "реиреп", english: "29", word: "рдЙрдирддреАрд╕", pronunciation: "untees" }, { hindi: "рейреж", english: "30", word: "рддреАрд╕", pronunciation: "tees" },
    { hindi: "рейрез", english: "31", word: "рдЗрдХрддреАрд╕", pronunciation: "iktees" }, { hindi: "рейреи", english: "32", word: "рдмрддреНрддреАрд╕", pronunciation: "battees" }, { hindi: "рейрей", english: "33", word: "рддреИрдВрддреАрд╕", pronunciation: "taintees" }, { hindi: "рейрек", english: "34", word: "рдЪреМрдВрддреАрд╕", pronunciation: "chauntees" }, { hindi: "рейрел", english: "35", word: "рдкреИрдВрддреАрд╕", pronunciation: "paintees" }, { hindi: "рейрем", english: "36", word: "рдЫрддреНрддреАрд╕", pronunciation: "chhattees" }, { hindi: "рейрен", english: "37", word: "рд╕реИрдВрддреАрд╕", pronunciation: "saintees" }, { hindi: "рейрео", english: "38", word: "рдЕрдбрд╝рддреАрд╕", pronunciation: "adtees" }, { hindi: "рейреп", english: "39", word: "рдЙрдирддрд╛рд▓реАрд╕", pronunciation: "untaalees" }, { hindi: "рекреж", english: "40", word: "рдЪрд╛рд▓реАрд╕", pronunciation: "chaalees" },
    { hindi: "рекрез", english: "41", word: "рдЗрдХрддрд╛рд▓реАрд╕", pronunciation: "iktaalees" }, { hindi: "рекреи", english: "42", word: "рдмрдпрд╛рд▓реАрд╕", pronunciation: "bayaalees" }, { hindi: "рекрей", english: "43", word: "рддреИрдВрддрд╛рд▓реАрд╕", pronunciation: "taintaalees" }, { hindi: "рекрек", english: "44", word: "рдЪреМрд╡рд╛рд▓реАрд╕", pronunciation: "chauvaalees" }, { hindi: "рекрел", english: "45", word: "рдкреИрдВрддрд╛рд▓реАрд╕", pronunciation: "paintaalees" }, { hindi: "рекрем", english: "46", word: "рдЫрд┐рдпрд╛рд▓реАрд╕", pronunciation: "chhiyaalees" }, { hindi: "рекрен", english: "47", word: "рд╕реИрдВрддрд╛рд▓реАрд╕", pronunciation: "saintaalees" }, { hindi: "рекрео", english: "48", word: "рдЕрдбрд╝рддрд╛рд▓реАрд╕", pronunciation: "adtaalees" }, { hindi: "рекреп", english: "49", word: "рдЙрдирдЪрд╛рд╕", pronunciation: "unchaas" }, { hindi: "релреж", english: "50", word: "рдкрдЪрд╛рд╕", pronunciation: "pachaas" },
    { hindi: "релрез", english: "51", word: "рдЗрдХреНрдпрд╛рд╡рди", pronunciation: "ikyaavan" }, { hindi: "релреи", english: "52", word: "рдмрд╛рд╡рди", pronunciation: "baavan" }, { hindi: "релрей", english: "53", word: "рддрд┐рд░рдкрди", pronunciation: "tirapan" }, { hindi: "релрек", english: "54", word: "рдЪреМрд╡рди", pronunciation: "chauvan" }, { hindi: "релрел", english: "55", word: "рдкрдЪрдкрди", pronunciation: "pachapan" }, { hindi: "релрем", english: "56", word: "рдЫрдкреНрдкрди", pronunciation: "chhappan" }, { hindi: "релрен", english: "57", word: "рд╕рддреНрддрд╛рд╡рди", pronunciation: "sattaavan" }, { hindi: "релрео", english: "58", word: "рдЕрдЯреНрдард╛рд╡рди", pronunciation: "atthaavan" }, { hindi: "релреп", english: "59", word: "рдЙрдирд╕рда", pronunciation: "unasath" }, { hindi: "ремреж", english: "60", word: "рд╕рд╛рда", pronunciation: "saath" },
    { hindi: "ремрез", english: "61", word: "рдЗрдХрд╕рда", pronunciation: "ikasath" }, { hindi: "ремреи", english: "62", word: "рдмрд╛рд╕рда", pronunciation: "baasath" }, { hindi: "ремрей", english: "63", word: "рддрд┐рд░рд╕рда", pronunciation: "tirasath" }, { hindi: "ремрек", english: "64", word: "рдЪреМрдВрд╕рда", pronunciation: "chaunsath" }, { hindi: "ремрел", english: "65", word: "рдкреИрдВрд╕рда", pronunciation: "painsath" }, { hindi: "ремрем", english: "66", word: "рдЫрд┐рдпрд╛рд╕рда", pronunciation: "chhiyaasath" }, { hindi: "ремрен", english: "67", word: "рд╕рд░рд╕рда", pronunciation: "sarasath" }, { hindi: "ремрео", english: "68", word: "рдЕрдбрд╝рд╕рда", pronunciation: "adasath" }, { hindi: "ремреп", english: "69", word: "рдЙрдирд╣рддреНрддрд░", pronunciation: "unahattar" }, { hindi: "ренреж", english: "70", word: "рд╕рддреНрддрд░", pronunciation: "sattar" },
    { hindi: "ренрез", english: "71", word: "рдЗрдХрд╣рддреНрддрд░", pronunciation: "ikahattar" }, { hindi: "ренреи", english: "72", word: "рдмрд╣рддреНрддрд░", pronunciation: "bahattar" }, { hindi: "ренрей", english: "73", word: "рддрд┐рд╣рддреНрддрд░", pronunciation: "tihattar" }, { hindi: "ренрек", english: "74", word: "рдЪреМрд╣рддреНрддрд░", pronunciation: "chauhattar" }, { hindi: "ренрел", english: "75", word: "рдкрдЪрд╣рддреНрддрд░", pronunciation: "pachahattar" }, { hindi: "ренрем", english: "76", word: "рдЫрд┐рд╣рддреНрддрд░", pronunciation: "chhihattar" }, { hindi: "ренрен", english: "77", word: "рд╕рддрд╣рддреНрддрд░", pronunciation: "satahattar" }, { hindi: "ренрео", english: "78", word: "рдЕрдард╣рддреНрддрд░", pronunciation: "athahattar" }, { hindi: "ренреп", english: "79", word: "рдЙрдирд╛рд╕реА", pronunciation: "unaasee" }, { hindi: "реореж", english: "80", word: "рдЕрд╕реНрд╕реА", pronunciation: "assee" },
    { hindi: "реорез", english: "81", word: "рдЗрдХреНрдпрд╛рд╕реА", pronunciation: "ikyaasee" }, { hindi: "реореи", english: "82", word: "рдмрдпрд╛рд╕реА", pronunciation: "bayaasee" }, { hindi: "реорей", english: "83", word: "рддрд┐рд░рд╛рд╕реА", pronunciation: "tiraasee" }, { hindi: "реорек", english: "84", word: "рдЪреМрд░рд╛рд╕реА", pronunciation: "chauraasee" }, { hindi: "реорел", english: "85", word: "рдкрдЪрд╛рд╕реА", pronunciation: "pachaasee" }, { hindi: "реорем", english: "86", word: "рдЫрд┐рдпрд╛рд╕реА", pronunciation: "chhiyaasee" }, { hindi: "реорен", english: "87", word: "рд╕рддреНрддрд╛рд╕реА", pronunciation: "sattaasee" }, { hindi: "реорео", english: "88", word: "рдЕрдЯреНрдард╛рд╕реА", pronunciation: "atthaasee" }, { hindi: "реореп", english: "89", word: "рдирд╡рд╛рд╕реА", pronunciation: "navaasee" }, { hindi: "репреж", english: "90", word: "рдирдмреНрдмреЗ", pronunciation: "nabbe" },
    { hindi: "репрез", english: "91", word: "рдЗрдХреНрдпрд╛рдирдмреЗ", pronunciation: "ikyaanabe" }, { hindi: "репреи", english: "92", word: "рдмрд╛рдирдмреЗ", pronunciation: "baanabe" }, { hindi: "репрей", english: "93", word: "рддрд┐рд░рд╛рдирдмреЗ", pronunciation: "tiraanabe" }, { hindi: "репрек", english: "94", word: "рдЪреМрд░рд╛рдирдмреЗ", pronunciation: "chauraanabe" }, { hindi: "репрел", english: "95", word: "рдкрдВрдЪрд╛рдирдмреЗ", pronunciation: "panchaanabe" }, { hindi: "репрем", english: "96", word: "рдЫрд┐рдпрд╛рдирдмреЗ", pronunciation: "chhiyaanabe" }, { hindi: "репрен", english: "97", word: "рд╕рддреНрддрд╛рдирдмреЗ", pronunciation: "sattaanabe" }, { hindi: "репрео", english: "98", word: "рдЕрдЯреНрдард╛рдирдмреЗ", pronunciation: "atthaanabe" }, { hindi: "репреп", english: "99", word: "рдирд┐рдиреНрдпрд╛рдирдмреЗ", pronunciation: "ninyaanabe" }, { hindi: "резрежреж", english: "100", word: "рд╕реМ", pronunciation: "sau" }
];


const VOWELS_LENGTH = VOWELS.length;
const CONSONANTS_LENGTH = CONSONANTS.length;
const NUMBERS_1_TO_100_LENGTH = NUMBERS_1_TO_100.length;
const LEVEL2_CATEGORY_LENGTH = 10;
const LEVEL3_CATEGORY_LENGTH = 10;
const GAMES_LENGTHS = { 'fill-blanks': 5, 'match-words': 2, 'count-apples': 5 };
const ITEMS_PER_PAGE = 20;

// Text-to-Speech function for pronunciation
function speakText(text, lang = 'hi-IN') {
  if ('speechSynthesis' in window) {
    window.speechSynthesis.cancel(); // Cancel any previous speech
    const utterance = new SpeechSynthesisUtterance(text);
    utterance.lang = lang;
    utterance.rate = 0.8; 
    window.speechSynthesis.speak(utterance);
  } else {
    console.log("Speech synthesis not supported");
  }
}

// ===== CORE PROGRESS TRACKING SYSTEM =====
function initHindiProgress() {
  const defaultProgress = {
    level1: { alphabets: { completed: 0, total: VOWELS_LENGTH + CONSONANTS_LENGTH }, numbers: { completed: 0, total: NUMBERS_1_TO_100_LENGTH } },
    level2: { fruits: { completed: 0, total: LEVEL2_CATEGORY_LENGTH }, vegetables: { completed: 0, total: LEVEL2_CATEGORY_LENGTH }, animals: { completed: 0, total: LEVEL2_CATEGORY_LENGTH }, birds: { completed: 0, total: LEVEL2_CATEGORY_LENGTH }, vehicles: { completed: 0, total: LEVEL2_CATEGORY_LENGTH }, colors: { completed: 0, total: LEVEL2_CATEGORY_LENGTH } },
    level3: { greetings: { completed: 0, total: LEVEL3_CATEGORY_LENGTH }, activities: { completed: 0, total: LEVEL3_CATEGORY_LENGTH }, questions: { completed: 0, total: LEVEL3_CATEGORY_LENGTH } },
    games: { 'fill-blanks': { completed: 0, total: GAMES_LENGTHS['fill-blanks'] }, 'match-words': { completed: 0, total: GAMES_LENGTHS['match-words'] }, 'count-apples': { completed: 0, total: GAMES_LENGTHS['count-apples'] } },
    achievements: { firstSteps: false, alphabetMaster: false, numberWhiz: false, wordExpert: false, sentenceBuilder: false, gameChampion: false, weekStreak: false, monthStreak: false },
    streak: { count: 0, lastDate: null },
    sessionDate: null
  };

  let progress;
  try {
      progress = JSON.parse(localStorage.getItem('linguaKidsHindiProgress'));
      if (!progress) {
          progress = defaultProgress;
          console.log("Created new Hindi progress data.");
      } else {
          progress = { ...defaultProgress, ...progress, 
              level1: { ...defaultProgress.level1, ...progress.level1 },
              level2: { ...defaultProgress.level2, ...progress.level2 },
              level3: { ...defaultProgress.level3, ...progress.level3 },
              games: { ...defaultProgress.games, ...progress.games }
          };
      }
  } catch (e) {
      console.error("Error parsing progress data. Resetting to default.", e);
      progress = defaultProgress;
  }
  
  localStorage.setItem('linguaKidsHindiProgress', JSON.stringify(progress));
  updateHindiStreak();
  return progress;
}

function updateHindiProgress(level, category, increment = 1, itemIdentifier = null) {
  const progress = JSON.parse(localStorage.getItem('linguaKidsHindiProgress'));
  const today = new Date().toDateString();
  
  if (progress[level] && progress[level][category]) {
    const itemKey = itemIdentifier ? `${level}_${category}_${itemIdentifier}` : null;
    const sessionKey = itemKey ? `${itemKey}_${today}` : null;

    if (sessionKey && sessionStorage.getItem(sessionKey)) {
      console.log("Progress already tracked for this item today.");
      return false;
    }
    
    if (progress[level][category].completed < progress[level][category].total) { 
      progress[level][category].completed = Math.min(progress[level][category].completed + increment, progress[level][category].total);
    } else {
      return false; 
    }
    
    localStorage.setItem('linguaKidsHindiProgress', JSON.stringify(progress));
    
    if (sessionKey) { sessionStorage.setItem(sessionKey, 'true'); }

    updateHindiStreak(); 
    updateProgressIndicator();
    showAchievementToast("рдмрд╣реБрдд рдмрдврд╝рд┐рдпрд╛! (Great job!)", "рдЖрдк рдкреНрд░рдЧрддрд┐ рдХрд░ рд░рд╣реЗ рд╣реИрдВ! (You're making progress!)");
    
    return true;
  }
  return false;
}

function updateHindiStreak() {
  const progress = JSON.parse(localStorage.getItem('linguaKidsHindiProgress'));
  const today = new Date().toDateString();
  
  if (progress.sessionDate !== today) {
    let lastDate = progress.streak.lastDate ? new Date(progress.streak.lastDate) : null;
    const todayDate = new Date();
    
    if (lastDate) {
      const diffTime = todayDate.getTime() - lastDate.getTime();
      const diffDays = Math.round(diffTime / (1000 * 60 * 60 * 24));
      
      if (diffDays === 1) { progress.streak.count++; } 
      else if (diffDays > 1) { progress.streak.count = 1; }
    } else {
      progress.streak.count = 1; 
    }
    
    progress.streak.lastDate = today;
    progress.sessionDate = today;
    localStorage.setItem('linguaKidsHindiProgress', JSON.stringify(progress));
  }
}

function updateProgressIndicator() {
  const progress = JSON.parse(localStorage.getItem('linguaKidsHindiProgress'));
  if (!progress) return;

  let totalCompleted = 0;
  let totalPossible = 0;
  
  Object.values(progress.level1).forEach(cat => { totalCompleted += cat.completed; totalPossible += cat.total; });
  Object.values(progress.level2).forEach(cat => { totalCompleted += cat.completed; totalPossible += cat.total; });
  Object.values(progress.level3).forEach(cat => { totalCompleted += cat.completed; totalPossible += cat.total; });
  Object.values(progress.games).forEach(game => { totalCompleted += game.completed; totalPossible += game.total; });
  
  const overallProgress = totalPossible > 0 ? Math.round((totalCompleted / totalPossible) * 100) : 0;
  document.getElementById('progressIndicator').textContent = `Progress: ${overallProgress}%`;
}

function showAchievementToast(title, description) {
  const toast = document.getElementById("achievementToast");
  if(!toast) return;
  toast.querySelector("#toastTitle").textContent = title;
  toast.querySelector("#toastDesc").textContent = description;
  toast.classList.add("show");
  setTimeout(() => { toast.classList.remove("show"); }, 3000);
}

// ===== MAIN APPLICATION FUNCTIONS =====
function loadLevel1(){
  toggleGlobalBack(true);
  document.getElementById("learning-content").innerHTML = `
    <h2>Progress Tracking</h2>
    <div class="sub-container">
      <div class="sub-card" onclick="window.location.href='hinprogress.html'">
        <h3>My Progress</h3><p>Track your learning journey</p>
      </div>
    </div>

    <h2>Level 1: Alphabets & Numbers</h2>
    <div class="sub-container">
      <div class="sub-card" onclick="loadAlphabetsMenu()"><h3>рд╡рд░реНрдгрдорд╛рд▓рд╛ (Alphabets)</h3><p>Learn Vowels and Consonants</p></div>
      <div class="sub-card" onclick="loadNumbersMenu()"><h3>рдЕрдВрдХ (Numbers)</h3><p>Learn 1тАУ100 in Hindi</p></div>
    </div>
    
    <h2>Level 2: Basic Words</h2>
    <div class="sub-container">
      <div class="sub-card" onclick="goToLevel2('fruits')"><h3>рдлрд▓ (Fruits)</h3><p>Learn names of fruits in Hindi</p></div>
      <div class="sub-card" onclick="goToLevel2('vegetables')"><h3>рд╕рдмреНрдЬрд┐рдпрд╛рдБ (Vegetables)</h3><p>Learn names of vegetables</p></div>
      <div class="sub-card" onclick="goToLevel2('animals')"><h3>рдЬрд╛рдирд╡рд░ (Animals)</h3><p>Learn about animals</p></div>
      <div class="sub-card" onclick="goToLevel2('birds')"><h3>рдкрдХреНрд╖реА (Birds)</h3><p>Learn about birds</p></div>
      <div class="sub-card" onclick="goToLevel2('vehicles')"><h3>рд╡рд╛рд╣рди (Vehicles)</h3><p>Learn about vehicles</p></div>
      <div class="sub-card" onclick="goToLevel2('colors')"><h3>рд░рдВрдЧ (Colors)</h3><p>Learn different colors</p></div>
    </div>

    <h2>Level 3: Sentences & Expressions</h2>
    <div class="sub-container">
      <div class="sub-card" onclick="goToLevel3('greetings')"><h3>Greetings</h3><p>рдирдорд╕реНрддреЗ, рд╢реБрдн рдкреНрд░рднрд╛рдд...</p></div>
      <div class="sub-card" onclick="goToLevel3('activities')"><h3>Daily Activities</h3><p>рдореИрдВ рдЦрд╛рддрд╛ рд╣реВрдБ...</p></div>
      <div class="sub-card" onclick="goToLevel3('questions')"><h3>Simple Q&A</h3><p>What is your name?</p></div>
    </div>

    <h2>Games</h2>
    <div class="sub-container">
      <div class="sub-card" onclick="playGame('fill-blanks')"><h3>Fill in the blanks</h3><p>Practice with missing words</p></div>
      <div class="sub-card" onclick="playGame('match-words')"><h3>Match words</h3><p>Match words with images</p></div>
      <div class="sub-card" onclick="playGame('count-apples')"><h3>Count the apples</h3><p>Count and learn numbers</p></div>
    </div>
  `;
}

function loadAlphabetsMenu(){
  toggleGlobalBack(false);
  document.getElementById("learning-content").innerHTML = `
    <button class="btn back-btn-lesson" onclick="loadLevel1()">Back</button>
    <div class="tab-container">
      <button class="tab-btn active" id="vowels-tab-btn" onclick="showTab('vowels')">рд╕реНрд╡рд░ (Vowels)</button>
      <button class="tab-btn" id="consonants-tab-btn" onclick="showTab('consonants')">рд╡реНрдпрдВрдЬрди (Consonants)</button>
    </div>
    <div id="vowels-tab-content" class="letters-grid">
      ${VOWELS.map((l, index)=>`
        <div class="letter-card" onclick="trackAlphabetProgress('vowels', ${index})">
          <div class="main-char">${l.hindi}</div><div class="small-char">${l.english}</div><div class="example">${l.word}</div>
          <button class="sound-btn" onclick="event.stopPropagation(); speakText('${l.pronunciation}'); trackAlphabetProgress('vowels', ${index})"><i class="fas fa-volume-up"></i></button>
        </div>`).join("")}
    </div>
    <div id="consonants-tab-content" class="letters-grid" style="display:none;">
      ${CONSONANTS.map((l, index)=>`
        <div class="letter-card" onclick="trackAlphabetProgress('consonants', ${index})">
          <div class="main-char">${l.hindi}</div><div class="small-char">${l.english}</div><div class="example">${l.word}</div>
          <button class="sound-btn" onclick="event.stopPropagation(); speakText('${l.pronunciation}'); trackAlphabetProgress('consonants', ${index})"><i class="fas fa-volume-up"></i></button>
        </div>`).join("")}
    </div>
  `;
}

function showTab(tabName) {
    document.getElementById('vowels-tab-content').style.display = tabName === 'vowels' ? 'grid' : 'none';
    document.getElementById('consonants-tab-content').style.display = tabName === 'consonants' ? 'grid' : 'none';
    document.getElementById('vowels-tab-btn').classList.toggle('active', tabName === 'vowels');
    document.getElementById('consonants-tab-btn').classList.toggle('active', tabName === 'consonants');
}

function trackAlphabetProgress(type, index) {
  const identifier = `${type}_${index}`;
  updateHindiProgress('level1', 'alphabets', 1, identifier);
}

function loadNumbersMenu() {
    toggleGlobalBack(false);
    document.getElementById('learning-content').innerHTML = `
        <button class="btn back-btn-lesson" onclick="loadLevel1()">Back</button>
        <h2 style="margin-top: 40px;">Numbers 1-100</h2>
        <div id="numbers-grid-container"></div>
        <div id="pagination-container" class="pagination"></div>
    `;
    renderNumbersPage(1);
}

function renderNumbersPage(page) {
    const gridContainer = document.getElementById('numbers-grid-container');
    const paginationContainer = document.getElementById('pagination-container');
    if (!gridContainer || !paginationContainer) return;

    const start = (page - 1) * ITEMS_PER_PAGE;
    const end = start + ITEMS_PER_PAGE;
    const pageItems = NUMBERS_1_TO_100.slice(start, end);

    gridContainer.innerHTML = `<div class="numbers-grid-100">
        ${pageItems.map((num, index) => {
            const overallIndex = start + index;
            return `
            <div class="number-card-100" onclick="trackNumberProgress(${overallIndex})">
                <div class="main-char">${num.hindi}</div>
                <div class="small-char">${num.word} (${num.english})</div>
                <button class="sound-btn" onclick="event.stopPropagation(); speakText('${num.pronunciation}'); trackNumberProgress(${overallIndex});">
                    <i class="fas fa-volume-up"></i>
                </button>
            </div>`;
        }).join('')}
    </div>`;

    const totalPages = Math.ceil(NUMBERS_1_TO_100.length / ITEMS_PER_PAGE);
    paginationContainer.innerHTML = '';
    for (let i = 1; i <= totalPages; i++) {
        paginationContainer.innerHTML += `<button class="pagination-btn ${i === page ? 'active' : ''}" onclick="renderNumbersPage(${i})">${i}</button>`;
    }
}

function trackNumberProgress(index) {
    const identifier = `number_${index + 1}`;
    updateHindiProgress('level1', 'numbers', 1, identifier);
}

function toggleGlobalBack(show) {
  const btn = document.getElementById("globalBack");
  if (!btn) return;
  btn.style.display = show ? "inline-block" : "none";
}

function goBackHome(){ window.location.href = "welcome.html"; }
function goToLevel2(category){ window.location.href = `hinlevel2.html?category=${category}`; }
function goToLevel3(category){ window.location.href = `hinlevel3.html?category=${category}`; }
function playGame(gameType){ window.location.href = `hingames.html?game=${gameType}`; }

// Initial Load
loadLevel1();

// Make functions globally accessible for onclick attributes
window.loadLevel1 = loadLevel1;
window.loadAlphabetsMenu = loadAlphabetsMenu;
window.loadNumbersMenu = loadNumbersMenu;
window.renderNumbersPage = renderNumbersPage;
window.trackNumberProgress = trackNumberProgress;
window.trackAlphabetProgress = trackAlphabetProgress;
window.showTab = showTab;
window.goBackHome = goBackHome;
window.goToLevel2 = goToLevel2;
window.goToLevel3 = goToLevel3;
window.playGame = playGame;
window.speakText = speakText;

document.addEventListener('DOMContentLoaded', function() {
  initHindiProgress();
  updateProgressIndicator();
});
</script>
</body>
</html>